(this["webpackJsonpresouce-routing"]=this["webpackJsonpresouce-routing"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var c=n(2),a=n(4),i=n(15);function r(){return{name:"",expanded:!0,splits:[]}}function o(e){return{name:e.name||"",splits:(e.splits||[]).map(i.d)}}function s(e){return{name:e.name||"",expanded:!0,splits:(e.splits||[]).map(i.e)}}function l(e,t){var n=e.name,c=e.splits,r=Object(a.i)(n),o=Object(a.g)(c,(function(e){return Object(i.b)(e,t)}));return"".concat(r).concat(o)}function d(e,t,n){var r=Object(a.d)(e,t),s=Object(c.a)(r,3),l=s[0],d=s[1],u=s[2];if(null!==u)return[o({name:"",expanded:!0,splits:[]}),-1,"Fail to decompress branch name: ".concat(u)];var h=Object(a.b)(e,d,(function(e,t){return Object(i.c)(e,t,n)})),b=Object(c.a)(h,3),p=b[0],j=b[1],f=b[2];return null!==f?[o({name:"",expanded:!0,splits:[]}),-1,"Fail to decompress branch splits: ".concat(f)]:[{name:l,splits:p},j,null]}},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var c=n(2);function a(e){return(e/=255)<=.03928?e/=12.92:e=(e+.055)/1.055^2.4,e}function i(){var e="0123456789abcdef",t=e[Math.floor(12*Math.random())+4],n=e[4*Math.floor(4*Math.random())],c=e[Math.floor(12*Math.random())+4],a=e[4*Math.floor(4*Math.random())],i=e[Math.floor(12*Math.random())+4],r=e[4*Math.floor(4*Math.random())];return"#".concat(t).concat(n).concat(c).concat(a).concat(i).concat(r)}function r(e){if(!e)return["black","white"];var t=function(e){if(!window.getComputedStyle)return[255,255,255];var t=document.getElementById("temp");if(null==t)return[255,255,255];t.style.color="white",t.style.color=e;var n=window.getComputedStyle(t).color;return"rgb(255, 255, 255)"===n?[255,255,255]:n.replace("rgb(","").replace(")","").split(",").map((function(e){return Number(e.trim())}))}(e),n=Object(c.a)(t,3),i=n[0],r=n[1],o=n[2];return 255===i&&255===r&&255===o?["black","white"]:function(e,t,n){return.2126*a(e)+.7152*a(t)+.0722*a(n)<1.8}(i,r,o)?["white",e]:["black",e]}},13:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var c=n(2),a=n(12),i=n(4);function r(){return{name:"",color:Object(a.b)()}}function o(e){return{name:e.name||"",color:e.color||""}}function s(e){return{name:e.name||"",color:e.color||""}}function l(e){var t=e.name,n=e.color,c=Object(i.i)(t.replace(/:/g,"_")),a=Object(i.i)(n);return"".concat(c).concat(a)}function d(e,t){var n=Object(i.d)(e,t),a=Object(c.a)(n,3),o=a[0],s=a[1],l=a[2];if(null!==l)return[r(),-1,"Fail to decompress item name: ".concat(l)];var d=Object(i.d)(e,s),u=Object(c.a)(d,3),h=u[0],b=u[1];return null!==u[2]?[r(),-1,"Fail to decompress item color: ".concat(l)]:[{name:o,color:h},b,null]}},14:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u}));var c=n(2),a=n(4),i=n(8);function r(){return{name:"",expanded:!0,deltaString:"",deltaError:null,deltas:{}}}function o(e){var t=Object(i.f)(e.deltaString),n=Object(c.a)(t,2),a=n[0],r=n[1];return{name:e.name,expanded:e.expanded,deltaString:e.deltaString,deltaError:r,deltas:a}}function s(e){return{name:e.name||"",deltaString:e.deltaString||""}}function l(e){var t=Object(i.f)(e.deltaString),n=Object(c.a)(t,2),a=n[0],r=n[1];return{name:e.name||"",deltaString:e.deltaString||"",expanded:!0,deltas:a,deltaError:r}}function d(e,t){var n,r=e.name,o=e.deltaString,s=Object(a.i)(r),l=Object(i.f)(o),d=Object(c.a)(l,2),u=d[0],h=d[1],b=null!==h||null===u,p=Object(a.h)(b);return n=null!==h||null===u?Object(a.i)(o):Object(a.i)(Object(i.c)(u,t)),"".concat(s).concat(p).concat(n)}function u(e,t,n){var r=Object(a.d)(e,t),o=Object(c.a)(r,3),s=o[0],l=o[1],d=o[2];if(null!==d)return[{name:"",deltaString:""},-1,"Fail to decompress action name: ".concat(d)];var u=Object(a.c)(e,l),h=Object(c.a)(u,3),b=h[0],p=h[1],j=h[2];if(null!==j)return[{name:"",deltaString:""},-1,"Fail to decompress action delta error: ".concat(j)];var f,m=Object(a.d)(e,p),v=Object(c.a)(m,3),x=v[0],O=v[1],g=v[2];if(null!==g)return[{name:"",deltaString:""},-1,"Fail to decompress action delta string: ".concat(g)];if(b)f=x;else{var S=Object(i.a)(x,n),I=Object(c.a)(S,2),y=I[0],w=I[1];if(null!==w||null===y)return[{name:"",deltaString:""},-1,"Fail to decompress action delta: ".concat(w)];f=Object(i.d)(y)}return[{name:s,deltaString:f},O,null]}},15:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u}));n(48);var c=n(2),a=n(14),i=n(4);function r(){return{name:"",expanded:!0,actions:[]}}function o(e){return{name:e.name,expanded:e.expanded,actions:e.actions.map(a.a)}}function s(e){return{name:e.name||"",actions:(e.actions||[]).map(a.d)}}function l(e){return{name:e.name||"",expanded:!1,actions:(e.actions||[]).map(a.e)}}function d(e,t){var n=e.name,c=e.actions,r=Object(i.i)(n),o=Object(i.g)(c,(function(e){return Object(a.b)(e,t)}));return"".concat(r).concat(o)}function u(e,t,n){var r=Object(i.d)(e,t),o=Object(c.a)(r,3),l=o[0],d=o[1],u=o[2];if(null!==u)return[s({name:"",expanded:!0,actions:[]}),-1,"Fail to decompress split name: ".concat(u)];var h=Object(i.b)(e,d,(function(e,t){return Object(a.c)(e,t,n)})),b=Object(c.a)(h,3),p=b[0],j=b[1],f=b[2];return null!==f?[s({name:"",expanded:!0,actions:[]}),-1,"Fail to decompress split actions: ".concat(f)]:[{name:l,actions:p},j,null]}},4:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"j",(function(){return v}));var c=n(2),a=n(6),i=n(10),r=n(13),o=n(33),s=n.n(o);function l(e){var t=Object(a.a)(e),n=t.projectName,c=t.branches,o=t.items,s=u(n),l={};o.forEach((function(e,t){l[e.name]=t}));var d=j(c,(function(e){return Object(i.a)(e,l)})),h=j(o,r.a);return"".concat(s).concat(h).concat(d)}function d(e){var t=h(e,0),n=Object(c.a)(t,3),o=n[0],s=n[1],l=n[2];if(null!==l)return[null,"Fail to decompress project name: ".concat(l)];var d=f(e,s,r.b),u=Object(c.a)(d,3),b=u[0],p=u[1],j=u[2];if(null!==j)return[null,"Fail to decompress project items: ".concat(j)];var m=b.map((function(e){return e.name})),v=f(e,p,(function(e,t){return Object(i.b)(e,t,m)})),x=Object(c.a)(v,3),O=x[0],g=x[1],S=x[2];if(null!==S)return[null,"Fail to decompress project branches: ".concat(S)];if(g!==e.length)return[null,"Fail to decompress project: length mismatch"];var I={projectName:o,branches:O,items:b};return[Object(a.g)(I),null]}function u(e){return 0===e.length?":":"".concat(e.length,":").concat(e)}function h(e,t){var n=e.indexOf(":",t);if(n<t)return["null",-1,"Fail to decode: length not found"];if(n===t)return["",n+1,null];var c=Number(e.substring(t,n));return Number.isInteger(c)?n+c>=e.length?["null",-1,"Fail to decode: length out of bound: ".concat(c)]:[e.substring(n+1,n+1+c),n+c+1,null]:["null",-1,"Fail to decode: invalid length: ".concat(c)]}function b(e){return e?"T":"F"}function p(e,t){return t<0||t>=e.length?[!1,-1,"Fail to decode: index out of bound"]:"T"===e[t]?[!0,t+1,null]:"F"===e[t]?[!1,t+1,null]:[!1,-1,"Fail to decode: invalid boolean: ".concat(e[t])]}function j(e,t){return"[".concat(e.map(t).join(""),"]")}function f(e,t,n){if(t<0||t>=e.length)return[[],-1,"Fail to decode array: index out of bound"];if("["!==e[t])return[[],-1,"Fail to decode array: invalid array"];var a=[];for(t++;t<e.length&&"]"!==e[t];){var i=n(e,t),r=Object(c.a)(i,3),o=r[0],s=r[1],l=r[2];if(null!==l)return[[],-1,"Fail to decode array at element ".concat(a.length,": ").concat(l)];t=s,a.push(o)}return t>=e.length?[[],-1,"Fail to decode array: array not properly closed"]:[a,t+1,null]}function m(e){return s.a.deflateSync(e).toString("base64")}function v(t){return s.a.inflateSync(e.from(t,"base64")).toString()}}).call(this,n(16).Buffer)},55:function(e,t,n){},56:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return j})),n.d(t,"l",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"k",(function(){return x})),n.d(t,"j",(function(){return O}));var c=n(2),a=n(10),i=n(13),r=n(4),o="RRT_COMPRESS_STATE",s="RRT_SETTINGS";function l(e){return{branches:(e.branches||[]).map(a.c),items:(e.items||[]).map(i.c),projectName:e.projectName||""}}function d(e){return{projectName:e.projectName||"",activeBranch:-1,activeSplit:-1,activeAction:-1,branches:(e.branches||[]).map(a.d),items:(e.items||[]).map(i.d)}}function u(){return{projectName:"Unnamed Project",activeBranch:-1,activeSplit:-1,activeAction:-1,branches:[],items:[]}}function h(e){return Object(r.f)(Object(r.a)(e))}function b(e){return JSON.stringify(l(e))}function p(e){var t=Object(r.j)(e);return Object(r.e)(t)}function j(e){return[d(JSON.parse(e)),null]}function f(e,t){var n=function(e){return Object(r.a)(e)}(e);localStorage.setItem(o,n),x(t)}function m(e,t,n){var c=new Blob([t],{type:"text"}),a=document.createElement("a"),i=e+"."+n;a.download=i,a.href=URL.createObjectURL(c),a.dataset.downloadurl=["text",a.download,a.href].join(":"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((function(){URL.revokeObjectURL(a.href)}),1500)}function v(){var e,t=localStorage.getItem(o),n=localStorage.getItem(s);if(null===n?(console.error("Failed to load settings from localstorage"),e=void 0):e=JSON.parse(n),null===t)return console.error("Failed to load from localstorage"),[void 0,e];var a,i=(a=t,Object(r.e)(a)),l=Object(c.a)(i,2),d=l[0],u=l[1];return null!==u||null===d?(console.error("Failed to load from localstorage: ".concat(u)),[void 0,e]):[d,e]}function x(e){localStorage.setItem(s,JSON.stringify(e))}function O(e,t){if(e){var n=new FileReader;n.onloadend=function(){var e=n.result;t((null===e||void 0===e?void 0:e.toString())||"")},n.readAsText(e)}}},68:function(e,t){},70:function(e,t){},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"g",(function(){return h}));var c=n(2);function a(e,t){for(var n in e)e[n].type.startsWith("ref")&&e[n].value===t&&delete e[n];t in e&&delete e[t]}function i(e,t,n){for(var c in e)e[c].type.startsWith("ref")&&e[c].value===t&&(e[c].value=n);t in e&&(e[n]=e[t],delete e[t])}function r(e){var t=[];for(var n in e)t.push(s(n,e[n]));return t.join(", ")}function o(e){if(!e||!e.length)return[{},null];if(!e.trim())return[{},null];var t=e.split(",").map((function(e){return e.trim()})),n={},a=[];return t.forEach((function(e){var t=function(e){if(!e||!e.length)return[null,null];if(!e.startsWith("["))return[null,"Invalid: ".concat(e)];var t=e.indexOf("]");if(t<0)return[null,"Item name bracket not closed: ".concat(e)];var n=e.substring(1,t);if(e.length<=t+1)return[null,"Item [".concat(n,"] missing operator and quantity")];var c=e[t+1],a=e.substring(t+2);if(0===a.length)return[null,"Item [".concat(n,"] has empty value")];return a.startsWith("[")?a.endsWith("]")?b(n,c,a.substring(1,a.length-1)):[null,"Item reference bracket not closed: ".concat(a)]:p(n,c,a)}(e.trim()),i=Object(c.a)(t,2),r=i[0],o=i[1];null!==r?r.name in n?a.push("Duplicate: ".concat(r.name)):n[r.name]={type:r.type,value:r.value}:null!==o&&a.push(o)})),a.length>0?[null,a.join("; ")]:[n,null]}function s(e,t){var n=t.type,a=h(n,t.value),i=Object(c.a)(a,2),r=i[0],o=i[1],s=o;return n.startsWith("ref")&&(s="[".concat(o,"]")),"[".concat(e,"]").concat(r).concat(s)}function l(e,t){var n=[];for(var c in e)n.push(u(c,t,e[c]));return n.join(",")}function d(e,t){if(!e||!e.length)return[{},null];if(!e.trim())return[{},null];var n=e.split(",").map((function(e){return e.trim()})),a={},i=[];return n.forEach((function(e){var n=function(e,t){if(!e||!e.length)return[null,null];var n=e.indexOf(":");if(n<0)return[null,"Item index not found: ".concat(e)];var c=e.substring(0,n);if(e.length<=n+1)return[null,"Item [".concat(c,"] missing operator and quantity")];var a,i=Number(c);if(Number.isInteger(i)){if(i<0||i>=t.length)return[null,"Invalid index: ".concat(c)];a=t[i]}else a=c;var r=e[n+1],o=e.substring(n+2);if(0===o.length)return[null,"Item [".concat(a,"] has empty value")];if(o.startsWith(":")){var s,l=o.substring(1),d=Number(l);if(Number.isInteger(d)){if(d<0||d>=t.length)return[null,"Invalid ref index: ".concat(l)];s=t[d]}else s=l;return b(a,r,s)}return p(a,r,o)}(e.trim(),t),r=Object(c.a)(n,2),o=r[0],s=r[1];null!==o?a[o.name]={type:o.type,value:o.value}:null!==s&&i.push(s)})),i.length>0?[null,i.join("; ")]:[a,null]}function u(e,t,n){var a=n.type,i=h(a,n.value),r=Object(c.a)(i,2),o=r[0],s=r[1],l=s;a.startsWith("ref")&&(l=":".concat(s in t?t[s]:s));var d=e;return d=e in t?t[e]:d.replace(/:/g,""),"".concat(d,":").concat(o).concat(l)}function h(e,t){switch(e){case"add":return t>=0?["+",t]:["-",-t];case"set":case"ref_set":return["=",t];case"ref_add":return["+",t];case"ref_sub":return["-",t];default:return["?",t]}}function b(e,t,n){var c;switch(t){case"+":c="ref_add";break;case"-":c="ref_sub";break;case"=":c="ref_set";break;default:return[null,"Item [".concat(e,']: unknown operator "').concat(t,'"')]}return[{name:e,type:c,value:n},null]}function p(e,t,n){var c,a=Number(n);if(!Number.isInteger(a))return[null,"Item [".concat(e,']: invalid quantity "').concat(n)];switch(t){case"+":c="add";break;case"-":c="add",a=-a;break;case"=":c="set";break;default:return[null,"Item [".concat(e,']: unknown operator "').concat(t,'"')]}return[{name:e,type:c,value:a},null]}},91:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(25),r=n.n(i),o=(n(55),n(2)),s=n(44),l=n(45),d=n(50),u=n(49),h=(n(56),n(3)),b=n(0),p=function(e){var t=e.expanded,n=e.setExpanded;return Object(b.jsx)("button",{className:"icon-button",onClick:function(){return n(!t)},children:t?"-":"+"})};function j(e){return e.routeState}function f(e){return j(e).projectName}function m(e){return j(e).activeBranch}function v(e){return j(e).activeSplit}function x(e){var t=m(e),n=v(e);if(t>=0&&n>=0)return H(e,t,n)}function O(e){var t;return null===(t=x(e))||void 0===t?void 0:t.name}function g(e){var t;return null===(t=x(e))||void 0===t?void 0:t.actions}function S(e){var t;return null===(t=g(e))||void 0===t?void 0:t.length}function I(e,t){var n=g(e);return void 0===n?void 0:n[t]}function y(e,t){var n;return null===(n=I(e,t))||void 0===n?void 0:n.name}function w(e,t){var n;return null===(n=I(e,t))||void 0===n?void 0:n.expanded}function N(e,t){var n;return null===(n=I(e,t))||void 0===n?void 0:n.deltaString}function A(e,t){var n,c=null===(n=I(e,t))||void 0===n?void 0:n.deltaError;return c||void 0}function k(e,t){var n,c=null===(n=I(e,t))||void 0===n?void 0:n.deltas;return c||void 0}function C(e){return j(e).activeAction}function E(e){var t=C(e);if(!(t<0)){var n=I(e,t);return null===n||void 0===n?void 0:n.name}}function B(e){return j(e).branches}function R(e,t){return B(e)[t]}function D(e){return B(e).length}function F(e,t){return R(e,t).name}function T(e,t){return R(e,t).expanded}function W(e,t){return R(e,t).splits}function H(e,t,n){return W(e,t)[n]}function _(e,t){return W(e,t).length}function M(e,t,n){return H(e,t,n).name}function L(e,t,n){return H(e,t,n).expanded}function z(e,t,n){return H(e,t,n).actions}function U(e,t,n,c){return z(e,t,n)[c]}function P(e,t,n){return z(e,t,n).length}function Y(e,t,n,c){return""===U(e,t,n,c).deltaString}function q(e,t,n,c){return U(e,t,n,c).name}function J(e,t,n,c){return U(e,t,n,c).deltas}function X(e,t,n,c){return U(e,t,n,c).deltaString}function G(e,t,n,c){for(var a=0,i=0;i<t;i++)for(var r=_(e,i),o=0;o<r;o++)a+=P(e,i,o);for(var s=0;s<n;s++)a+=P(e,t,s);return a+c}function Q(e){var t=0;return B(e).forEach((function(e){e.splits.forEach((function(e){t+=e.actions.length}))})),t}function K(e){return j(e).items}function V(e,t){var n;return null===(n=function(e,t){var n=K(e).filter((function(e){return e.name===t}));if(0!==n.length)return n[0]}(e,t))||void 0===n?void 0:n.color}function Z(e,t){return K(e)[t].name}function $(e,t){return K(e)[t].color}function ee(e){return K(e).length}var te=function(e,t){return{isNote:Y(e,t.branchIndex,t.splitIndex,t.actionIndex),name:q(e,t.branchIndex,t.splitIndex,t.actionIndex)}},ne=(Object(h.b)(te),Object(h.b)(te)((function(e){var t=e.isNote,n=e.name||"[Unnamed Action]";return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{}),Object(b.jsx)("td",{}),Object(b.jsx)("td",{className:"icon-button-width",children:">"}),Object(b.jsx)("td",{colSpan:8,children:t?Object(b.jsx)("em",{children:n}):n})]})}))),ce=Object(h.b)((function(e,t){return{length:P(e,t.branchIndex,t.splitIndex)}}))((function(e){for(var t=e.length,n=e.branchIndex,c=e.splitIndex,a=[],i=0;i<t;i++)a.push(Object(b.jsx)(ne,{branchIndex:n,splitIndex:c,actionIndex:i},i));return Object(b.jsx)(b.Fragment,{children:a})}));function ae(e){return e.applicationState}function ie(e){return ae(e).info}function re(e){return ae(e).resourcesCollapsed}function oe(e){return ae(e).headerCollapsed}function se(e){return ae(e).sideCollapsed}function le(e){return ae(e).editingNav}function de(e){return ae(e).editingActions}function ue(e){return ae(e).editingItems}function he(e){return ae(e).splitClipboard}function be(e){return ae(e).resources}function pe(e){return be(e).progress}function je(e){return be(e).error}function fe(e,t){return be(e).content[t]}function me(e){return ae(e).showHelp}var ve=n(5),xe=n(7),Oe=n(14),ge=n(10),Se=n(8),Ie=n(13),ye=64,we=128,Ne=512,Ae=n(15);function ke(e,t){var n=D(e);return t>=0&&t<n}function Ce(e,t,n){return!!ke(e,t)&&(n>=0&&n<_(e,t))}function Ee(e,t){return t>=0&&t<ee(e)}function Be(e,t,n,c){return!!Ce(e,t,n)&&(c>=0&&c<P(e,t,n))}function Re(e,t,n,c,a){var i=Object(Se.f)(t),r=Object(o.a)(i,2),s=r[0],l=r[1];if(l)e.routeState.branches[n].splits[c].actions[a].deltaError=l,e.routeState.branches[n].splits[c].actions[a].deltas=null;else{if(null!==s){var d=function(e,t){var n=K(e).map((function(e){return e.name})).sort();t.sort();for(var c=0,a=0,i=[];c<n.length&&a<t.length;)t[a]<n[c]?(i.push(t[a]),a++):t[a]>n[c]?c++:(c++,a++);for(;a<t.length;a++)i.push(t[a]);return i}(e,Object.keys(s));if(d.length>0){var u="Undefined item(s): ".concat(d.join(", "));return e.routeState.branches[n].splits[c].actions[a].deltaError=u,void(e.routeState.branches[n].splits[c].actions[a].deltas=null)}}e.routeState.branches[n].splits[c].actions[a].deltaError=null,e.routeState.branches[n].splits[c].actions[a].deltas=s}}var De={setRouteState:function(e,t){e.routeState=t.payload.routeState},setProjectName:function(e,t){e.routeState.projectName=t.payload.projectName},setActiveBranchAndSplit:function(e,t){e.routeState.activeBranch=t.payload.activeBranch,e.routeState.activeSplit=t.payload.activeSplit,e.routeState.activeAction=-1},setActiveAction:function(e,t){e.routeState.activeAction=t.payload.activeAction},createBranch:function(e,t){var n=t.payload.branchIndex;if(!(D(e)>=ye)){var c=Object(ge.e)();if(ke(e,n)){e.routeState.branches.splice(n,0,c);var a=m(e);a>=n&&(e.routeState.activeBranch=a+1)}else e.routeState.branches.push(c)}},setBranchName:function(e,t){var n=t.payload,c=n.branchIndex,a=n.name;e.routeState.branches[c].name=a},setBranchExpanded:function(e,t){var n=t.payload,c=n.branchIndex,a=n.expanded;e.routeState.branches[c].expanded=a},deleteBranch:function(e,t){var n=t.payload.branchIndex;e.routeState.branches.splice(n,1);var c=m(e);c===n?e.routeState.activeBranch=-1:c>n&&(e.routeState.activeBranch=c-1)},swapBranches:function(e,t){var n=t.payload,c=n.i,a=n.j;if(ke(e,c)&&ke(e,a)){var i=e.routeState.branches[c];e.routeState.branches[c]=e.routeState.branches[a],e.routeState.branches[a]=i;var r=m(e);r===c?e.routeState.activeBranch=a:r===a&&(e.routeState.activeBranch=c)}},mergeNextIntoBranch:function(e,t){var n=t.payload.branchIndex;if(n!==D(e)-1&&ke(e,n)){var c=_(e,n);if(!(c+_(e,n+1)>=we)){e.routeState.branches[n].splits=e.routeState.branches[n].splits.concat(e.routeState.branches[n+1].splits),e.routeState.branches.splice(n+1,1);var a=m(e);a===n+1&&(e.routeState.activeBranch=a-1,e.routeState.activeSplit+=c)}}},breakBranchAt:function(e,t){if(!(D(e)>=ye)){var n=t.payload,c=n.branchIndex,a=n.splitIndex;if(Ce(e,c,a)){var i=e.routeState.branches[c].splits.slice(a);e.routeState.branches[c].splits=e.routeState.branches[c].splits.slice(0,a);var r=Object(ge.e)();r.expanded=!0,r.splits=i,e.routeState.branches.splice(c+1,0,r);var o=m(e),s=v(e);o===c&&s>=a&&(e.routeState.activeBranch=o+1,e.routeState.activeSplit-=a)}}},createSplit:function(e,t){var n=t.payload,c=n.branchIndex,a=n.splitIndex,i=n.templateSplit;if(ke(e,c)&&!(_(e,c)>=we)){var r=i?Object(Ae.a)(i):Object(Ae.f)();if(Ce(e,c,a)){if(e.routeState.branches[c].splits.splice(a,0,r),m(e)===c){var o=v(e);o>=a&&(e.routeState.activeSplit=o+1)}}else e.routeState.branches[c].splits.push(r)}},setSplitName:function(e,t){var n=t.payload,c=n.branchIndex,a=n.splitIndex,i=n.name;e.routeState.branches[c].splits[a].name=i},setActiveSplitName:function(e,t){var n=m(e),c=v(e);if(Ce(e,n,c)){var a=t.payload.name;e.routeState.branches[n].splits[c].name=a}},setSplitExpanded:function(e,t){var n=t.payload,c=n.branchIndex,a=n.splitIndex,i=n.expanded;e.routeState.branches[c].splits[a].expanded=i},deleteSplit:function(e,t){var n=t.payload,c=n.branchIndex,a=n.splitIndex;if(Ce(e,c,a)&&(e.routeState.branches[c].splits.splice(a,1),m(e)===c)){var i=v(e);i===a?e.routeState.activeSplit=-1:i>a&&(e.routeState.activeSplit=i-1)}},swapSplits:function(e,t){var n=t.payload,c=n.branchIndex,a=n.i,i=n.j;if(Ce(e,c,a)&&Ce(e,c,i)){var r=e.routeState.branches[c].splits[a];if(e.routeState.branches[c].splits[a]=e.routeState.branches[c].splits[i],e.routeState.branches[c].splits[i]=r,m(e)===c){var o=v(e);o===a?e.routeState.activeSplit=i:o===i&&(e.routeState.activeSplit=a)}}},moveFirstSplitToPreviousBranch:function(e,t){var n=t.payload.branchIndex;if(ke(e,n)&&ke(e,n-1)&&!(_(e,n)<=0)){var c=_(e,n-1);e.routeState.branches[n-1].splits.push(e.routeState.branches[n].splits[0]),e.routeState.branches[n].splits.splice(0,1),m(e)===n&&(0===v(e)?(e.routeState.activeBranch=n-1,e.routeState.activeSplit=c):e.routeState.activeSplit-=1)}},moveLastSplitToNextBranch:function(e,t){var n=t.payload.branchIndex;if(ke(e,n)&&ke(e,n+1)&&!(_(e,n)<=0)){var c=_(e,n)-1;e.routeState.branches[n+1].splits.splice(0,0,e.routeState.branches[n].splits[c]),e.routeState.branches[n].splits.pop(),m(e)===n?v(e)===c&&(e.routeState.activeBranch=n+1,e.routeState.activeSplit=0):m(e)===n+1&&(e.routeState.activeSplit+=1)}},createItem:function(e,t){var n=t.payload.index,c=Object(Ie.e)();ee(e)>=Ne||(Ee(e,n)?e.routeState.items.splice(n,0,c):e.routeState.items.push(c))},setItemName:function(e,t){var n=t.payload,c=n.index,a=n.name,i=e.routeState.items[c].name;e.routeState.items[c].name=a;for(var r=0;r<D(e);r++)for(var o=0;o<_(e,r);o++)for(var s=0;s<P(e,r,o);s++){var l=J(e,r,o,s);null!==l&&(Object(Se.e)(l,i,a),e.routeState.branches[r].splits[o].actions[s].deltaString=Object(Se.d)(l))}},setItemColor:function(e,t){var n=t.payload,c=n.index,a=n.color;e.routeState.items[c].color=a},swapItems:function(e,t){var n=t.payload,c=n.i,a=n.j;if(Ee(e,c)&&Ee(e,a)){var i=e.routeState.items[c];e.routeState.items[c]=e.routeState.items[a],e.routeState.items[a]=i}},deleteItem:function(e,t){var n,c=t.payload.index;if(Ee(e,c)){var a=e.routeState.items[c];e.routeState.items.splice(c,1),n=a.name}else{var i=e.routeState.items.pop();if(void 0===i)return;n=i.name}for(var r=0;r<D(e);r++)for(var o=0;o<_(e,r);o++)for(var s=0;s<P(e,r,o);s++){var l=J(e,r,o,s);if(null!==l){Object(Se.b)(l,n);var d=Object(Se.d)(l);e.routeState.branches[r].splits[o].actions[s].deltaString=d,""===d&&m(e)===r&&v(e)===o&&C(e)===s&&(e.routeState.activeAction=-1)}}},createAction:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex,o=t.payload.actionIndex;if(Ce(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e))&&!(P(e,i,r)>=32)){var s=Object(Oe.f)();if(Be(e,i,r,o)){e.routeState.branches[i].splits[r].actions.splice(o,0,s);var l=m(e),d=v(e);if(l===i&&d===r)C(e)>=o&&(e.routeState.activeAction+=1)}else e.routeState.branches[i].splits[r].actions.push(s)}},setActionName:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex,o=t.payload,s=o.actionIndex,l=o.name;Be(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e),s)&&(e.routeState.branches[i].splits[r].actions[s].name=l)},setActionExpanded:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex,o=t.payload,s=o.actionIndex,l=o.expanded;Be(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e),s)&&(e.routeState.branches[i].splits[r].actions[s].expanded=l)},setActionDeltaString:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex,o=t.payload,s=o.actionIndex,l=o.deltaString;Be(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e),s)&&(""===l&&m(e)===i&&v(e)===r&&C(e)===s&&(e.routeState.activeAction=-1),e.routeState.branches[i].splits[r].actions[s].expanded=!0,e.routeState.branches[i].splits[r].actions[s].deltaString=l,Re(e,l,i,r,s))},deleteAction:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex,o=t.payload.actionIndex;if(Be(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e),o)&&(e.routeState.branches[i].splits[r].actions.splice(o,1),m(e)===i&&v(e)===r)){var s=C(e);s===o?e.routeState.activeAction=-1:s>o&&(e.routeState.activeAction-=1)}},swapActions:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex,o=t.payload,s=o.i,l=o.j;if(Be(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e),s)&&Be(e,i,r,l)){var d=e.routeState.branches[i].splits[r].actions[s];if(e.routeState.branches[i].splits[r].actions[s]=e.routeState.branches[i].splits[r].actions[l],e.routeState.branches[i].splits[r].actions[l]=d,m(e)===i&&v(e)===r){var u=C(e);u===s?e.routeState.activeAction=l:u===l&&(e.routeState.activeAction=s)}}},reparseAllDeltaStrings:function(e){for(var t=0;t<D(e);t++)for(var n=0;n<_(e,t);n++)for(var c=0;c<P(e,t,n);c++)Re(e,X(e,t,n,c),t,n,c)},changeActiveSplit:function(e,t){var n=m(e),c=v(e);if(!(n<0||c<0)){for(var a=0,i=0;i<n;i++)a+=_(e,i);for(var r=(a+=c)+t.payload.changeBy,o=-1,s=-1,l=0;l<D(e);l++){var d=_(e,l);if(r<d){o=l,s=r;break}r-=d}e.routeState.activeBranch=o,e.routeState.activeSplit=s,e.routeState.activeAction=-1}},collapseAll:function(e){e.routeState.branches.forEach((function(e){e.splits.forEach((function(e){e.expanded=!1})),e.expanded=!1}))}};function Fe(e,t){var n=pe(e);if(!(n>=0&&n<t)){e.applicationState.resources.progress=t;var c=je(e);if(null!==c)G(e,c.branch,c.split,c.action)>=t&&(e.applicationState.resources.error=null)}}var Te={setHeaderCollapsed:function(e,t){e.applicationState.headerCollapsed=t.payload.collapsed},setSideCollapsed:function(e,t){e.applicationState.sideCollapsed=t.payload.collapsed},setResourcesCollapsed:function(e,t){e.applicationState.resourcesCollapsed=t.payload.collapsed},setEditingNav:function(e,t){e.applicationState.editingNav=t.payload.editing},setEditingActions:function(e,t){e.applicationState.editingActions=t.payload.editing},setEditingItems:function(e,t){e.applicationState.editingItems=t.payload.editing},setInfo:function(e,t){e.applicationState.info=t.payload.info},setSplitClipboard:function(e,t){e.applicationState.splitClipboard=t.payload.split},setResourceContent:function(e,t){var n=t.payload,c=n.globalIndex,a=n.content;e.applicationState.resources.content[c]=a,e.applicationState.resources.progress=c+1},setResourceError:function(e,t){e.applicationState.resources.error=t.payload.error},markResourceDirtyAt:function(e,t){Fe(e,t.payload.globalIndex)},markResourceDirtyAtSplit:function(e,t){var n,c,a=t.payload,i=a.branchIndex,r=a.splitIndex;Fe(e,G(e,i=null!==(n=i)&&void 0!==n?n:m(e),r=null!==(c=r)&&void 0!==c?c:v(e),0))},setShowingHelp:function(e,t){e.applicationState.showHelp=t.payload.showHelp}},We={routeState:{projectName:"Unnamed Project",activeBranch:-1,activeSplit:-1,activeAction:-1,branches:[],items:[]},settingState:{autoSave:!0,onlyShowChangedItems:!1,hideEmptyItems:!0,itemFilter:""},applicationState:{sideCollapsed:!1,headerCollapsed:!0,resourcesCollapsed:!1,noResources:!1,shrinkSide:!1,editingNav:!1,editingActions:!1,editingItems:!1,info:"",splitClipboard:void 0,resources:{error:null,content:[],progress:-1},showOnlyChangedResources:!1,showHelp:!1}},He=Object(xe.b)({name:"state",initialState:We,reducers:Object(ve.a)(Object(ve.a)(Object(ve.a)({},De),Te),{setSettingState:function(e,t){e.settingState=t.payload.settingState},setItemFilter:function(e,t){e.settingState.itemFilter=t.payload.filter},setAutoSaveEnabled:function(e,t){e.settingState.autoSave=t.payload.enabled},setOnlyShowChangedItems:function(e,t){e.settingState.onlyShowChangedItems=t.payload.showOnlyChanged},setHideEmptyItems:function(e,t){e.settingState.hideEmptyItems=t.payload.hideEmpty}})}),_e=He.actions,Me=Object(xe.a)({reducer:He.reducer}),Le=_e.setRouteState,ze=_e.setActiveBranchAndSplit,Ue=_e.setActiveAction,Pe=_e.createBranch,Ye=_e.setBranchName,qe=_e.setBranchExpanded,Je=_e.deleteBranch,Xe=_e.swapBranches,Ge=_e.mergeNextIntoBranch,Qe=_e.breakBranchAt,Ke=_e.createSplit,Ve=_e.setSplitName,Ze=_e.setActiveSplitName,$e=_e.setSplitExpanded,et=_e.deleteSplit,tt=_e.swapSplits,nt=_e.moveFirstSplitToPreviousBranch,ct=_e.moveLastSplitToNextBranch,at=_e.createItem,it=_e.setItemName,rt=_e.setItemColor,ot=_e.swapItems,st=_e.deleteItem,lt=_e.createAction,dt=_e.setActionName,ut=_e.setActionExpanded,ht=_e.deleteAction,bt=_e.swapActions,pt=_e.setActionDeltaString,jt=_e.setProjectName,ft=_e.reparseAllDeltaStrings,mt=_e.changeActiveSplit,vt=_e.collapseAll,xt=_e.setHeaderCollapsed,Ot=_e.setSideCollapsed,gt=_e.setResourcesCollapsed,St=_e.setEditingNav,It=_e.setEditingActions,yt=_e.setEditingItems,wt=_e.setInfo,Nt=_e.setSplitClipboard,At=_e.setResourceContent,kt=_e.setResourceError,Ct=_e.markResourceDirtyAt,Et=_e.markResourceDirtyAtSplit,Bt=_e.setShowingHelp,Rt=n(9);function Dt(){return(new Date).getTime()}function Ft(e){return(new Date).getTime()-e}var Tt=Object(h.b)((function(e,t){var n=t.branchIndex,c=t.splitIndex;return{name:M(e,n,c),expanded:L(e,n,c),isLastBranch:D(e)===n+1,editing:le(e),copiedSplit:he(e),splitToCopy:H(e,n,c),splitCount:_(e,n),actionInSplitCount:P(e,n,c)}}),(function(e){return{actions:Object(Rt.b)({setSplitExpanded:$e,setSplitName:Ve,breakBranchAt:Qe,setInfo:wt,deleteSplit:et,createSplit:Ke,setSplitClipboard:Nt,swapSplits:tt,moveFirstSplitToPreviousBranch:nt,moveLastSplitToNextBranch:ct,setActiveBranchAndSplit:ze,setEditingActions:It,markResourceDirtyAtSplit:Et,setShowingHelp:Bt,setEditingNav:St},e)}}))((function(e){var t,n=e.branchIndex,c=e.splitIndex,a=e.name,i=e.expanded,r=e.isLastBranch,o=e.editing,s=e.actions,l=e.appActions,d=e.copiedSplit,u=e.splitToCopy,h=e.splitCount,j=e.actionInSplitCount,f=c===h-1,m=0===n,v=0===c,x=a||"[Unnamed Split]",O=Object(b.jsx)("td",{className:"icon-button-width",children:j>0&&Object(b.jsx)(p,{expanded:i,setExpanded:function(e){s.setSplitExpanded({branchIndex:n,splitIndex:c,expanded:e})}})}),g=function(e){if(h>=we){var t="You have reached the maximum number of splits per branch (".concat(we,")");l.showAlert(t,void 0),s.setInfo({info:t})}else{var a=Dt();s.createSplit({branchIndex:n,splitIndex:c+1,templateSplit:e}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:c}),s.setEditingNav({editing:!0}),s.setInfo({info:"Split created. (".concat(Ft(a)," ms)")})}};return t=o?Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Break branch",onClick:function(){var e=Dt();s.breakBranchAt({branchIndex:n,splitIndex:c}),s.setInfo({info:"Branch broken. (".concat(Ft(e)," ms)")})},children:"/"})}),Object(b.jsx)("td",{colSpan:4,children:Object(b.jsx)("input",{className:"full-width",placeholder:"Split Name",type:"text",value:a,onChange:function(e){s.setSplitName({branchIndex:n,splitIndex:c,name:e.target.value})}})}),Object(b.jsx)("td",{className:"icon-button-width",children:!(v&&m)&&Object(b.jsx)("button",{className:"icon-button",disabled:v&&m,title:"Move up",onClick:function(){var e=Dt();v?(s.moveFirstSplitToPreviousBranch({branchIndex:n}),s.setInfo({info:"Split moved into previous branch. (".concat(Ft(e)," ms)")})):(s.swapSplits({branchIndex:n,i:c,j:c-1}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:c-1}),s.setInfo({info:"Split moved. (".concat(Ft(e)," ms)")}))},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!(f&&r)&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:f&&r,onClick:function(){var e=Dt();f?(s.moveLastSplitToNextBranch({branchIndex:n}),s.setInfo({info:"Split moved into next branch. (".concat(Ft(e)," ms)")})):(s.swapSplits({branchIndex:n,i:c,j:c+1}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:c}),s.setInfo({info:"Split moved. (".concat(Ft(e)," ms)")}))},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Copy",onClick:function(){var e=Dt();s.setSplitClipboard({split:u}),s.setInfo({info:"Split copied. (".concat(Ft(e)," ms)")})},children:"c"})}),Object(b.jsx)("td",{className:"icon-button-width",children:void 0!==d&&Object(b.jsx)("button",{className:"icon-button",title:"Paste Split Below",disabled:void 0===d,onClick:function(){g(d)},children:"p"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){l.showAlert('Delete split "'.concat(a,'"? All actions inside this split will also be deleted. This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Dt();s.deleteSplit({branchIndex:n,splitIndex:c}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:c}),s.setInfo({info:"Split deleted. (".concat(Ft(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Split Below",onClick:function(){g(void 0)},children:"*"})})]}):Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width"}),O,Object(b.jsx)("td",{colSpan:9,children:Object(b.jsx)("u",{className:"split-link",onClick:function(){s.setActiveBranchAndSplit({activeBranch:n,activeSplit:c}),s.setEditingActions({editing:!1}),s.setShowingHelp({showHelp:!1})},children:x})})]}),!i||o?t:Object(b.jsxs)(b.Fragment,{children:[t,Object(b.jsx)(ce,{branchIndex:n,splitIndex:c})]})})),Wt=Object(h.b)((function(e,t){var n=t.branchIndex;return{length:_(e,n),editing:le(e),isLastBranch:D(e)===n+1,currentBranchName:F(e,n),nextBranchName:n===D(e)-1?void 0:F(e,n+1),copiedSplit:he(e)}}),(function(e){return{actions:Object(Rt.b)({createSplit:Ke,setInfo:wt,mergeNextIntoBranch:Ge,markResourceDirtyAtSplit:Et,setEditingNav:St},e)}}))((function(e){for(var t=e.branchIndex,n=e.isLastBranch,c=e.length,a=e.editing,i=e.copiedSplit,r=e.currentBranchName,o=e.nextBranchName,s=e.actions,l=e.appActions,d=[],u=0;u<c;u++)d.push(Object(b.jsx)(Tt,{branchIndex:t,splitIndex:u,appActions:l},"split_".concat(u,"_")));var h=function(e){if(c>=we){var n="You have reached the maximum number of splits per branch (".concat(we,")");l.showAlert(n),s.setInfo({info:n})}else{var a=Dt();s.createSplit({branchIndex:t,splitIndex:c,templateSplit:e}),s.markResourceDirtyAtSplit({branchIndex:t,splitIndex:c}),s.setEditingNav({editing:!0}),s.setInfo({info:"Split created. (".concat(Ft(a)," ms)")})}};return Object(b.jsxs)(b.Fragment,{children:[d,Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width",children:a&&!n&&Object(b.jsx)("button",{className:"icon-button",title:"Merge branch",disabled:n,onClick:function(){l.showAlert('Merge branch "'.concat(o,'" into "').concat(r,'"?'),[{name:"Cancel"},{name:"Merge",execute:function(){var e=Dt();s.mergeNextIntoBranch({branchIndex:t}),s.setInfo({info:"Branch merged. (".concat(Ft(e)," ms)")})}}])},children:"^"})}),Object(b.jsxs)("td",{colSpan:10,children:[Object(b.jsx)("button",{onClick:function(){h(void 0)},children:"New Split"}),Object(b.jsx)("button",{className:"space-left-small",disabled:void 0===i,onClick:function(){h(i)},children:"Paste Split"})]})]})]})})),Ht=Object(h.b)((function(e,t){var n=t.index;return{name:F(e,n),expanded:T(e,n),editing:le(e),branchCount:D(e)}}),(function(e){return{actions:Object(Rt.b)({createBranch:Pe,setBranchName:Ye,setBranchExpanded:qe,deleteBranch:Je,setInfo:wt,swapBranches:Xe,setEditingNav:St,markResourceDirtyAtSplit:Et},e)}}))((function(e){var t,n=e.index,c=e.name,a=e.expanded,i=e.editing,r=e.actions,o=e.branchCount,s=e.appActions,l=c||"[Unnamed Branch]",d=0===n,u=n===o-1,h=Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)(p,{expanded:a,setExpanded:function(e){r.setBranchExpanded({branchIndex:n,expanded:e})}})}),j=Object(b.jsx)("input",{className:"full-width",placeholder:"Branch Name",type:"text",value:c,onChange:function(e){r.setBranchName({branchIndex:n,name:e.target.value})}});return t=i&&!a?Object(b.jsxs)("tr",{children:[h,Object(b.jsx)("td",{colSpan:6,children:j}),Object(b.jsx)("td",{className:"icon-button-width",children:!d&&Object(b.jsx)("button",{className:"icon-button",title:"Move up",disabled:d,onClick:function(){var e=Dt();r.swapBranches({i:n,j:n-1}),r.markResourceDirtyAtSplit({branchIndex:n-1,splitIndex:0}),r.setInfo({info:"Branch moved. (".concat(Ft(e)," ms)")})},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!u&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:u,onClick:function(){var e=Dt();r.swapBranches({i:n,j:n+1}),r.markResourceDirtyAtSplit({branchIndex:n,splitIndex:0}),r.setInfo({info:"Branch moved. (".concat(Ft(e)," ms)")})},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){s.showAlert('Delete branch "'.concat(c,'"? All splits inside this branch will also be deleted. This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Dt();r.deleteBranch({branchIndex:n}),r.markResourceDirtyAtSplit({branchIndex:n,splitIndex:0}),r.setInfo({info:"Branch deleted. (".concat(Ft(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Branch Below",onClick:function(){if(o>=ye){var e="You have reached the maximum number of branches (".concat(ye,")");s.showAlert(e),r.setInfo({info:e})}else{var t=Dt();r.createBranch({branchIndex:n+1}),r.markResourceDirtyAtSplit({branchIndex:n+1,splitIndex:0}),r.setEditingNav({editing:!0}),r.setInfo({info:"Branch created. (".concat(Ft(t)," ms)")})}},children:"*"})})]}):i?Object(b.jsxs)("tr",{children:[h,Object(b.jsx)("td",{colSpan:6,children:j}),Object(b.jsx)("td",{colSpan:4,children:Object(b.jsx)("em",{children:"collapse to edit"})})]}):Object(b.jsxs)("tr",{children:[h,Object(b.jsx)("td",{colSpan:10,children:Object(b.jsx)("strong",{children:l})})]}),a?Object(b.jsxs)(b.Fragment,{children:[t,Object(b.jsx)(Wt,{branchIndex:n,appActions:s})]}):t})),_t=Object(h.b)((function(e){return{length:D(e)}}),(function(e){return{actions:Object(Rt.b)({createBranch:Pe,setEditingNav:St,setInfo:wt,markResourceDirtyAtSplit:Et},e)}}))((function(e){for(var t=e.length,n=e.actions,c=e.appActions,a=[],i=0;i<t;i++)a.push(Object(b.jsx)(Ht,{index:i,appActions:c},i));return Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[a,Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:11,children:Object(b.jsx)("button",{onClick:function(){if(t>=ye){var e="You have reached the maximum number of branches (".concat(ye,")");c.showAlert(e),n.setInfo({info:e})}else{var a=Dt();n.createBranch({branchIndex:t}),n.markResourceDirtyAtSplit({branchIndex:t,splitIndex:0}),n.setEditingNav({editing:!0}),n.setInfo({info:"Branch created. (".concat(Ft(a)," ms)")})}},children:"New Branch"})})},"new_branch_button")]})})})),Mt=n(21),Lt=function(e){var t=e.direction,n=void 0===t?"vertical":t,c=e.base,a=void 0===c?"first":c,i=e.size,r=e.min,o=e.max,s=e.children,l=Object(Mt.a)(e,["direction","base","size","min","max","children"]);if(!Array.isArray(s)||2!==s.length)return console.error("Layout must contain 2 children"),null;var d,u,h=s[0],p=s[1],j="first"===a,f=r?"max( ".concat(r," , ").concat(i," )"):i;f=o?"min( ".concat(o," , ").concat(f,")"):f;var m="calc(100% - ".concat(f,")");return"horizontal"===n?(d={height:"100%",width:j?f:m,overflow:"hidden",float:"left"},u={height:"100%",width:j?m:f,overflow:"hidden",float:"right"}):(d={height:j?f:m,width:"100%",overflow:"hidden"},u={height:j?m:f,width:"100%",overflow:"hidden"}),Object(b.jsxs)(Ut,Object(ve.a)(Object(ve.a)({},l),{},{children:[Object(b.jsx)("div",{style:d,children:h}),Object(b.jsx)("div",{style:u,children:p})]}))},zt=function(e){var t=e.width,n=e.height,c=e.minWidth,a=e.maxWidth,i=e.minHeight,r=e.maxHeight,o=e.children,s=Object(Mt.a)(e,["width","height","minWidth","maxWidth","minHeight","maxHeight","children"]),l=i?"max( ".concat(n," , ").concat(i," )"):n,d=r?"min( ".concat(l,", ").concat(r," )"):l,u=c?"max( ".concat(t," , ").concat(c," )"):t,h=a?"min( ".concat(u,", ").concat(a," )"):u,p="calc( ( 100% - ".concat(d," ) / 2 )"),j="calc( ( 100% - ".concat(h," ) / 2 )");return Object(b.jsx)(Ut,{style:{position:"relative"},children:Object(b.jsx)("div",Object(ve.a)(Object(ve.a)({style:{position:"absolute",top:p,paddingLeft:j,width:h,height:d}},s),{},{children:o}))})},Ut=function(e){var t=e.style,n=e.children,c=Object(Mt.a)(e,["style","children"]);return Object(b.jsx)("div",Object(ve.a)(Object(ve.a)({style:Object(ve.a)(Object(ve.a)({},t),{},{width:"100%",height:"100%"})},c),{},{children:n}))},Pt=function(e){var t=e.style,n=e.children,c=Object(Mt.a)(e,["style","children"]);return Object(b.jsx)("div",Object(ve.a)(Object(ve.a)({style:Object(ve.a)(Object(ve.a)({},t),{},{position:"fixed",top:0,left:0,width:"100vw",height:"100vh"})},c),{},{children:n}))},Yt=Object(h.b)((function(e){return{sideCollapsed:se(e),editing:le(e)}}),(function(e){return{actions:Object(Rt.b)({setSideCollapsed:Ot,setEditingNav:St,collapseAll:vt},e)}}))((function(e){var t=e.sideCollapsed,n=e.actions,c=e.appActions,a=e.editing,i=Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{className:"space-left-small",onClick:function(){return n.setEditingNav({editing:!a})},children:a?"Finish":"Edit"}),Object(b.jsx)("button",{className:"space-left-small",onClick:function(){return n.collapseAll()},children:"Collapse All"})]});return Object(b.jsxs)(Lt,{base:"first",size:"2rem",className:"component border overflow-hidden",children:[Object(b.jsxs)(Ut,{className:" component header-border",children:[Object(b.jsx)(p,{expanded:!t,setExpanded:function(e){n.setSideCollapsed({collapsed:!e})}}),!t&&i]}),Object(b.jsx)(Ut,{className:"overflow-auto",children:!t&&Object(b.jsx)(_t,{appActions:c})})]})}));function qt(e){return e.settingState}function Jt(e){return qt(e).autoSave}function Xt(e){return qt(e).onlyShowChangedItems}function Gt(e){return qt(e).hideEmptyItems}function Qt(e){return qt(e).itemFilter}var Kt=_e.setItemFilter,Vt=_e.setSettingState,Zt=_e.setAutoSaveEnabled,$t=_e.setOnlyShowChangedItems,en=_e.setHideEmptyItems,tn=n(6),nn=Object(h.b)((function(e){return{projectName:f(e),autoSaveEnabled:Jt(e),sideCollapsed:se(e),headerCollapsed:oe(e),routeState:j(e),settingState:qt(e),editing:le(e)}}),(function(e){return{actions:Object(Rt.b)({setHeaderCollapsed:xt,setInfo:wt,setAutoSaveEnabled:Zt,setProjectName:jt,setShowingHelp:Bt,setEditingActions:It,setEditingItems:yt,setEditingNav:St,setRouteState:Le},e)}}))((function(e){var t,n=e.autoSaveEnabled,c=e.projectName,a=e.headerCollapsed,i=e.sideCollapsed,r=e.actions,o=e.routeState,s=e.settingState,l=e.editing,d=e.appActions,u=Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){return d.showIODialog()},children:"Import/Export"}),h=Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){var e=Dt();Object(tn.l)(o,s),r.setEditingActions({editing:!1}),r.setEditingItems({editing:!1}),r.setEditingNav({editing:!1}),r.setInfo({info:"Project saved to local storage. (".concat(Ft(e)," ms)")})},children:"Save"}),j=Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){r.setShowingHelp({showHelp:!0})},children:"Help"}),f=Object(b.jsxs)("span",{children:[u,h,j,Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){var e=!n;r.setAutoSaveEnabled({enabled:e});var t=Object(ve.a)(Object(ve.a)({},s),{},{autoSave:e});Object(tn.k)(t)},children:n?"Auto Save: Enabled":"Auto Save: Disabled"}),Object(b.jsx)("button",{className:"vertical-center space-left-small",disabled:!0,children:"Force Update Resources"}),Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){d.showAlert("Do you really want to delete everything? This is not reversible!!!",[{name:"Cancel"},{name:"Reset",execute:function(){var e=Dt(),t=Object(tn.i)();r.setRouteState({routeState:t}),r.setInfo({info:"Reset completed. (".concat(Ft(e)," ms)")})}}])},children:"Reset"})]}),m=Object(b.jsxs)("span",{children:[!a&&f,a&&Object(b.jsxs)(b.Fragment,{children:[u,h,j]})]});return t=l?Object(b.jsx)("input",{type:"text",value:c,onChange:function(e){r.setProjectName({projectName:e.target.value})}}):c,Object(b.jsxs)("div",{className:"overflow-hidden",children:[!i&&Object(b.jsx)("h3",{className:"overflow-hidden",children:t}),Object(b.jsx)(p,{expanded:!a,setExpanded:function(e){return r.setHeaderCollapsed({collapsed:!e})}}),!i&&m]})})),cn=Object(h.b)((function(e){return{text:ie(e)}}))((function(e){var t=e.text;return Object(b.jsx)("span",{className:"vertical-center",children:t})})),an=n(12),rn=Object(h.b)((function(e,t){var n,c=null!==(n=V(e,t.name))&&void 0!==n?n:"",a=Object(an.a)(c),i=Object(o.a)(a,2);return{foreground:i[0],background:i[1]}}),(function(e){return{actions:Object(Rt.b)({setItemFilter:Kt},e)}}))((function(e){var t,n=e.name,c=e.type,a=e.value,i=e.foreground,r=e.background,s=e.actions,l=n,d=Object(Se.g)(c,a),u=Object(o.a)(d,2),h=u[0],p=u[1];return t=c.startsWith("ref")?"[".concat(p,"]"):p,Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("span",{className:"cursor-pointer",style:{backgroundColor:r,color:i},onClick:function(){s.setItemFilter({filter:n})},children:["[",l,"]"]}),h,t]})})),on=Object(h.b)((function(e,t){var n=t.actionIndex;return{deltaError:A(e,n),deltas:k(e,n)}}))((function(e){var t=e.deltas,n=e.deltaError,c=[];if(void 0===n)for(var i in t)c.push(Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)(rn,Object(ve.a)({name:i},t[i])),", "]},i));return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width align-right",children:"\u0394"}),Object(b.jsx)("td",{colSpan:6,children:void 0!==n?Object(b.jsx)("span",{className:"deltastr-error",children:n}):c})]},"delta")})),sn=Object(h.b)((function(e,t){var n=t.index;return{name:y(e,n),expanded:w(e,n),length:S(e),deltaString:N(e,n),deltaError:A(e,n),deltas:k(e,n),editing:de(e)}}),(function(e){return{actions:Object(Rt.b)({setInfo:wt,createAction:lt,setEditingActions:It,setActionName:dt,setActionExpanded:ut,deleteAction:ht,swapActions:bt,setActionDeltaString:pt,markResourceDirtyAtSplit:Et,setActiveAction:Ue},e)}}))((function(e){var t,n=e.index,c=e.name,a=void 0===c?"":c,i=e.expanded,r=void 0!==i&&i,o=e.editing,s=e.actions,l=e.deltaString,d=void 0===l?"":l,u=e.length,h=void 0===u?0:u,j=e.appActions,f=a||"[Unnamed Action]",m=0===n,v=n===h-1,x=Object(b.jsx)("td",{className:"icon-button-width",children:d&&Object(b.jsx)(p,{expanded:r,setExpanded:function(e){s.setActionExpanded({actionIndex:n,expanded:e})}})});return t=o?Object(b.jsxs)("tr",{children:[x,Object(b.jsx)("td",{className:"icon-button-width",children:!m&&Object(b.jsx)("button",{className:"icon-button",disabled:m,title:"Move up",onClick:function(){var e=Dt();s.swapActions({i:n,j:n-1}),s.markResourceDirtyAtSplit({}),s.setInfo({info:"Action moved. (".concat(Ft(e)," ms)")})},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!v&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:v,onClick:function(){var e=Dt();s.swapActions({i:n,j:n+1}),s.markResourceDirtyAtSplit({}),s.setInfo({info:"Action moved. (".concat(Ft(e)," ms)")})},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){j.showAlert('Delete action "'.concat(a,'"? This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Dt();s.markResourceDirtyAtSplit({}),s.deleteAction({actionIndex:n}),s.setInfo({info:"Action deleted. (".concat(Ft(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Action Below",onClick:function(){if(h>=32){var e="You have reached the maximum number of actions per split (".concat(32,")");j.showAlert(e),s.setInfo({info:e})}else{var t=Dt();s.createAction({actionIndex:n+1}),s.markResourceDirtyAtSplit({}),s.setEditingActions({editing:!0}),s.setInfo({info:"Action created. (".concat(Ft(t)," ms)")})}},children:"*"})}),Object(b.jsx)("td",{className:"action-name-width",children:Object(b.jsx)("input",{className:"action-name-width",placeholder:"Action Title/Notes",type:"text",value:a,onChange:function(e){s.setActionName({actionIndex:n,name:e.target.value})}})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{className:"full-width",placeholder:"Delta String",type:"text",value:d,onChange:function(e){s.setActionDeltaString({actionIndex:n,deltaString:e.target.value}),s.markResourceDirtyAtSplit({})}})})]}):Object(b.jsxs)("tr",{children:[x,Object(b.jsxs)("td",{colSpan:6,children:[Object(b.jsx)("span",{children:d?Object(b.jsx)("u",{className:"split-link",onClick:function(){s.setActiveAction({activeAction:n})},children:f}):Object(b.jsx)("em",{children:f})}),!d&&Object(b.jsx)("div",{className:"action-note-spacer"})]})]}),r&&d?Object(b.jsxs)(b.Fragment,{children:[t,Object(b.jsx)(on,{actionIndex:n})]}):t})),ln=Object(h.b)((function(e){return{active:v(e)>=0,length:S(e)}}),(function(e){return{actions:Object(Rt.b)({createAction:lt,setEditingActions:It,setInfo:wt,markResourceDirtyAtSplit:Et},e)}}))((function(e){var t=e.length,n=e.active,c=e.actions,a=e.appActions;if(!n||void 0===t)return Object(b.jsx)("span",{children:"Click on a split to view its details"});for(var i=[],r=0;r<t;r++)i.push(Object(b.jsx)(sn,{index:r,appActions:a},r));return Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[i,Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:7,children:Object(b.jsx)("button",{onClick:function(){if(t>=32){var e="You have reached the maximum number of actions per split (".concat(32,")");a.showAlert(e),c.setInfo({info:e})}else{var n=Dt();c.createAction({actionIndex:t}),c.markResourceDirtyAtSplit({}),c.setEditingActions({editing:!0}),c.setInfo({info:"Action created. (".concat(Ft(n)," ms)")})}},children:"Add Action/Notes"})})},"new_action_button")]})})})),dn=Object(h.b)((function(e){return{splitName:O(e),editing:de(e)}}),(function(e){return{actions:Object(Rt.b)({setEditingActions:It,changeActiveSplit:mt,setActiveSplitName:Ze},e)}}))((function(e){var t=e.editing,n=e.splitName,c=e.appActions,a=e.actions,i=void 0!==n&&Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{className:"space-left-small",onClick:function(){a.setEditingActions({editing:!t})},children:t?"Finish":"Edit"}),Object(b.jsx)("button",{className:"space-left-small",onClick:function(){a.changeActiveSplit({changeBy:-1})},children:"Previous Split"}),Object(b.jsx)("button",{className:"space-left-small",onClick:function(){a.changeActiveSplit({changeBy:1})},children:"Next Split"})]}),r=void 0;return r=void 0!==n&&t?Object(b.jsx)("input",{type:"text",placeholder:"Split Name",value:n,onChange:function(e){a.setActiveSplitName({name:e.target.value})}}):n&&" - "+n,Object(b.jsxs)(Lt,{size:"2rem",className:"component border",children:[Object(b.jsxs)(Ut,{className:"component header-border",children:[Object(b.jsxs)("strong",{children:[" Split Detail ",r]}),i]}),Object(b.jsx)(Ut,{className:"overflow-auto",children:Object(b.jsx)(ln,{appActions:c})})]})})),un=function(e){var t=e.content,n=e.alertActions,c=e.actions;return void 0===t?null:Object(b.jsx)(Pt,{style:{backgroundColor:"rgb( 0 , 0 , 0 , 0.6 )"},children:Object(b.jsx)(zt,{width:"60%",height:"15rem",children:Object(b.jsxs)("div",{className:"component border",style:{backgroundColor:"white",height:"100%",padding:"1rem"},children:[t,Object(b.jsx)("div",{style:{position:"absolute",bottom:"1rem",right:"1rem"},children:n.map((function(e,t){return Object(b.jsx)("button",{className:"margin-small",onClick:function(){e.execute&&e.execute(),c.hideAlert()},children:e.name},t)}))})]})})})},hn=Object(h.b)((function(e,t){var n=$(e,t.index),c=Object(an.a)(n),a=Object(o.a)(c,2),i=a[0],r=a[1];return{name:Z(e,t.index),color:n,background:r,foreground:i,itemCount:ee(e)}}),(function(e){return{actions:Object(Rt.b)({createItem:at,setItemName:it,setItemColor:rt,setInfo:wt,deleteItem:st,swapItems:ot,markResourceDirtyAt:Ct,reparseAllDeltaStrings:ft},e)}}))((function(e){var t=e.name,n=e.color,a=e.foreground,i=e.background,r=e.index,s=e.itemCount,l=e.actions,d=e.appActions,u=r===s-1,h=0===r,p=Object(c.useState)(""),j=Object(o.a)(p,2),f=j[0],m=j[1];return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width",children:!h&&Object(b.jsx)("button",{className:"icon-button",disabled:h,title:"Move up",onClick:function(){var e=Dt();l.swapItems({i:r,j:r-1}),l.setInfo({info:"Item moved. (".concat(Ft(e)," ms)")})},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!u&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:u,onClick:function(){var e=Dt();l.swapItems({i:r,j:r+1}),l.setInfo({info:"Item moved. (".concat(Ft(e)," ms)")})},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){d.showAlert('Delete item "'.concat(t,'"? This item will also be removed from actions that currently have it. This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Dt();l.deleteItem({index:r}),l.reparseAllDeltaStrings(),l.markResourceDirtyAt({globalIndex:0}),l.setInfo({info:"Item deleted. (".concat(Ft(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Item Below",onClick:function(){if(s>=Ne){var e="You have reached the maximum number of items (".concat(Ne,")");d.showAlert(e),l.setInfo({info:e})}else{var t=Dt();l.createItem({index:r+1}),l.setInfo({info:"Item created. (".concat(Ft(t)," ms)")})}},children:"*"})}),Object(b.jsxs)("td",{className:"icon-button-width",style:{backgroundColor:i,color:a},children:[r+1,"."]}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{disabled:!f||f===t,className:"icon-button",title:"Apply rename",onClick:function(){var e=Dt();l.setItemName({index:r,name:f}),l.reparseAllDeltaStrings(),l.markResourceDirtyAt({globalIndex:0}),m(""),l.setInfo({info:"Item renamed. (".concat(Ft(e)," ms)")})},children:"R"})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{className:"full-width",placeholder:t||"Unnamed",type:"text",value:f,onChange:function(e){m(e.target.value)}})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{className:"full-width",placeholder:"Color (e.g, red, #FF0000, rgb(255, 0, 0)",type:"text",value:n,onChange:function(e){l.setItemColor({index:r,color:e.target.value})}})})]})}));function bn(e){var t=e.value,n=e.change;return 0===n?"x".concat(t):"x".concat(t," (").concat(n>=0?"+":"").concat(n,")")}var pn=Object(h.b)((function(e,t){var n=t.index,c=$(e,n),a=Object(an.a)(c),i=Object(o.a)(a,2),r=i[0],s=i[1];return{name:Z(e,n),foreground:r,background:s}}))((function(e){var t=e.name,n=e.delta,c=e.foreground,a=e.background,i=t||"[Unnamed Item]";return Object(b.jsxs)("td",{style:{backgroundColor:a,color:c},children:[Object(b.jsx)("span",{className:"item-span",children:i}),Object(b.jsx)("span",{className:"item-span",children:n&&bn(n)})]})})),jn=Object(h.b)((function(e){var t=Qt(e),n=t?t.split(",").map((function(e){return e.trim()})):[],c=function(e){var t=m(e),n=v(e),c=C(e);if(t>=0&&n>=0){var a=c;if(a<0){var i=P(e,t,n);i>0&&(a=i-1)}if(a>=0)return G(e,t,n,a)}}(e),a=void 0!==c?fe(e,c):void 0,i=function(e,t){if(0===t.length)return K(e).map((function(e,t){return t}));var n=t.map((function(e){return e.toLowerCase()})),c=[];return K(e).forEach((function(e,t){for(var a=0;a<n.length;a++)if(e.name.toLowerCase().includes(n[a])){c.push(t);break}})),c}(e,n);return Xt(e)&&a&&0!==Object.keys(a).length&&(i=i.filter((function(t){var n=Z(e,t);return n in a&&0!==a[n].change}))),Gt(e)&&a&&0!==Object.keys(a).length&&(i=i.filter((function(t){var n=Z(e,t);return n in a&&0!==a[n].value}))),{itemIndices:i,editing:ue(e),itemCount:ee(e),getItemNameByIndex:function(t){return Z(e,t)},deltas:a}}),(function(e){return{actions:Object(Rt.b)({setInfo:wt,createItem:at},e)}}))((function(e){var t,n=e.itemIndices,c=e.deltas,a=e.getItemNameByIndex,i=e.editing,r=e.actions,o=e.appActions,s=e.itemCount;if(i)t=n.map((function(e){return Object(b.jsx)(hn,{index:e,appActions:o},e)}));else{t=[];for(var l=0;l<n.length;l+=4){var d=Object(b.jsx)("tr",{children:[l,l+1,l+2,l+3].map((function(e){if(e>=n.length)return null;var t=n[e],i=a(t),r=c?c[i]:void 0;return Object(b.jsx)(pn,{index:n[e],delta:r},e)}))},l);t.push(d)}}return Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[t,Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:5,children:Object(b.jsx)("button",{onClick:function(){if(s>=Ne){var e="You have reached the maximum number of items (".concat(Ne,")");o.showAlert(e),r.setInfo({info:e})}else{var t=Dt();r.createItem({index:s}),r.setInfo({info:"Item created. (".concat(Ft(t)," ms)")})}},children:"New Item"})})},"new_item_button")]})})})),fn=Object(h.b)((function(e){return{activeActionName:E(e),resourcesCollapsed:re(e),editing:ue(e),progress:pe(e),total:Q(e),error:je(e),filterString:Qt(e),onlyShowChanging:Xt(e),hideEmpty:Gt(e)}}),(function(e){return{actions:Object(Rt.b)({setEditingItems:yt,setItemFilter:Kt,setOnlyShowChangedItems:$t,setResourcesCollapsed:gt,setHideEmptyItems:en},e)}}))((function(e){var t,n=e.resourcesCollapsed,c=e.editing,a=e.actions,i=e.appActions,r=e.filterString,o=e.progress,s=e.total,l=e.error,d=e.onlyShowChanging,u=e.activeActionName,h=e.hideEmpty,j=Object(b.jsx)(p,{expanded:!n,setExpanded:function(e){return a.setResourcesCollapsed({collapsed:!e})}}),f=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"space-left-small",onClick:function(){return a.setEditingItems({editing:!c})},children:c?"Finish":"Edit"}),Object(b.jsx)("input",{className:"space-left-small",type:"text",value:r,placeholder:"Filter (use , to separate)",onChange:function(e){return a.setItemFilter({filter:e.target.value})}}),Object(b.jsx)("button",{className:"space-left-small icon-button",title:"Clear",onClick:function(){return a.setItemFilter({filter:""})},children:"X"}),void 0!==u&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{id:"show_only_changed_checkbox",className:"space-left-small",type:"checkbox",checked:d,onChange:function(e){a.setOnlyShowChangedItems({showOnlyChanged:e.target.checked})}}),Object(b.jsx)("label",{htmlFor:"show_only_changed_checkbox",children:"Show Only Changed"}),Object(b.jsx)("input",{id:"hide_empty_checkbox",className:"space-left-small",type:"checkbox",checked:h,onChange:function(e){a.setHideEmptyItems({hideEmpty:e.target.checked})}}),Object(b.jsx)("label",{htmlFor:"hide_empty_checkbox",children:"Hide Empty"})]})]});t=null===l?o===s||0===s?Object(b.jsx)("span",{children:"Resource up to date"}):Object(b.jsxs)("span",{children:["Updating Resources... (",o,"/",s,")"]}):Object(b.jsx)("span",{className:"deltastr-error",title:l.message,children:l.message});var m=Object(b.jsxs)("strong",{children:["Resources ",u&&" - ".concat(u)]});return n?Object(b.jsxs)(Ut,{className:"component border",children:[j,m]}):Object(b.jsxs)(Lt,{size:"3.2rem",className:"component border",children:[Object(b.jsxs)(Ut,{className:"component header-border overflow-hidden",children:[Object(b.jsxs)("div",{children:[j,m,f]}),Object(b.jsx)("div",{children:t})]}),Object(b.jsx)(Ut,{className:"overflow-auto",children:Object(b.jsx)(jn,{appActions:i})})]})})),mn=void 0;function vn(){void 0!==mn&&clearInterval(mn)}function xn(){if(Me.getState()){var e=Me.getState(),t=pe(e),n=Q(e);0!==n&&t<n&&function(e,t){t<0&&(t=0);var n=je(e);if(null!==n){if(t>G(e,n.branch,n.split,n.action))return void Me.dispatch(At({globalIndex:t,content:{}}))}var c={};if(t>0){var a=fe(e,t-1);if(void 0===a)return void Me.dispatch(Ct({globalIndex:t-1}));c=a}var i=function(e,t){for(var n=t,c=0;c<D(e);c++)for(var a=0;a<_(e,c);a++){var i=P(e,c,a);if(n<i)return[c,a,n];n-=i}return[-1,-1,-1]}(e,t),r=Object(o.a)(i,3),s=r[0],l=r[1],d=r[2],u=J(e,s,l,d);if(null!==function(e,t,n,c){return U(e,t,n,c).deltaError}(e,s,l,d)||null===u){var h=F(e,s),b=M(e,s,l),p=q(e,s,l,d),j={branch:s,split:l,action:d,message:'Error in branch "'.concat(h,'", split "').concat(b,'", action "').concat(p,'"')};return Me.dispatch(kt({error:j})),void Me.dispatch(At({globalIndex:t,content:{}}))}var f=function(e,t){var n,c,a=function(t){return t in e?e[t].value:0},i={};for(var r in e)i[r]={value:e[r].value,change:0};for(var o in t){var s=t[o],l=s.type,d=s.value,u=a(o),h=void 0,b=void 0;switch(l){case"add":h=u+(b=null!==(n=Number(d))&&void 0!==n?n:0);break;case"set":b=(h=null!==(c=Number(d))&&void 0!==c?c:0)-u;break;case"ref_add":h=u+(b=a(d.toString()));break;case"ref_sub":h=u+(b=-a(d.toString()));break;case"ref_set":b=(h=a(d.toString()))-u}i[o]={value:h,change:b}}return i}(c,u);Me.dispatch(At({globalIndex:t,content:f}))}(e,t)}}var On=void 0;function gn(){void 0!==On&&clearInterval(On)}function Sn(){if(Me.getState()){var e=Me.getState();e.settingState.autoSave&&(Object(tn.l)(e.routeState,e.settingState),Me.dispatch(wt({info:"Last saved to local storage: ".concat(new Date)})))}}var In=Object(h.b)((function(e){return{routeState:j(e),downloadName:f(e)||"Routing"}}),(function(e){return{actions:Object(Rt.b)({setRouteState:Le,setInfo:wt,markResourceDirtyAt:Ct},e)}}))((function(e){var t=e.routeState,n=e.downloadName,a=e.appActions,i=e.actions,r=Object(c.useState)(null),s=Object(o.a)(r,2),l=s[0],d=s[1],u=function(e,t){Object(tn.j)(e,(function(e){var n=t(e),c=Object(o.a)(n,2),r=c[0],s=c[1];if(null!==s||null===r)return a.showIODialog(!1),void a.showAlert("Error on import: ".concat(s));i.setRouteState({routeState:r}),i.markResourceDirtyAt({globalIndex:0}),a.showIODialog(!1),i.setInfo({info:"Imported."})}))};return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Export"})}),Object(b.jsx)("hr",{}),"Export As:",Object(b.jsx)("button",{className:"space-left-small",onClick:function(){var e=Object(tn.c)(t);Object(tn.b)(n,e,"txt")},children:"Base64 (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Compressed (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",onClick:function(){var e=Object(tn.d)(t);Object(tn.b)(n,e,"json")},children:"JSON (.json) [Recommended]"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Text (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"LiveSplit (.lss)"}),Object(b.jsx)("hr",{}),Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Import"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("input",{className:"vertical-center space-left-small",type:"file",onChange:function(e){d(e.target.files)}}),Object(b.jsx)("br",{}),"Import As:",Object(b.jsx)("button",{className:"space-left-small",disabled:null===l,onClick:function(){null!==l&&u(l[0],tn.e)},children:"Base64 (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Compressed (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:null===l,onClick:function(){null!==l&&u(l[0],tn.f)},children:"JSON (.json)"})]})})})),yn=function(){return Object(b.jsx)(Ut,{className:"component border overflow-auto",children:Object(b.jsxs)("div",{className:"help-doc",children:[Object(b.jsx)("h1",{children:"Resource Routing Tool"}),Object(b.jsx)("p",{children:"This tool is very useful for tracking various resources needed in a speedrun."}),Object(b.jsxs)("p",{children:["You might say: ",Object(b.jsx)("em",{children:' "Why don\'t I just use a spreadsheet?" '}),"This tool has some unique features that makes it better than a normal spreadsheet:",Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:["The robust algorithm keeps the route ",Object(b.jsx)("strong",{children:"consistent"})," while ",Object(b.jsx)("strong",{children:"moving splits and branches around."})]}),Object(b.jsxs)("li",{children:["Easy-to-use syntax to define and organize your items. ",Object(b.jsx)("strong",{children:"No complex formulas"})]}),Object(b.jsxs)("li",{children:["Export your route as TXT, JSON, or to ",Object(b.jsx)("strong",{children:"LiveSplit"})," [WIP]"]})]})]}),Object(b.jsx)("h2",{children:"Getting Started"}),Object(b.jsxs)("p",{children:["The data structure of the tool is very intuitive: there are ",Object(b.jsx)("strong",{children:"branches"}),", ",Object(b.jsx)("strong",{children:"splits"}),", and ",Object(b.jsx)("strong",{children:"actions"}),"."]}),Object(b.jsx)("p",{children:"If you are into speedrun. You already know what a split is. Branches are basically groups of splits. Actions are what you do in the split that affects the resources you track."}),Object(b.jsxs)("p",{children:["For example, a typical section of the run could be like this:",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Tutorial Levels"}),Object(b.jsxs)("li",{children:["Main Area",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Dungeon A"}),Object(b.jsxs)("li",{children:["Dungeon B",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Pick up 5 of Item 1"}),Object(b.jsx)("li",{children:"Fight Monster X"})]})]}),Object(b.jsxs)("li",{children:["Dungeon C",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Use 3 of Item 2"}),Object(b.jsx)("li",{children:"Fight Monster Y"})]})]})]})]}),Object(b.jsx)("li",{children:"Final Boss"})]})]}),Object(b.jsx)("h2",{children:"Branch and Splits"}),Object(b.jsx)("p",{children:'You can use the side panel to organize your branches and splits. Use the "Edit" button to enter editing mode, where you can move branches and splits, rename them, or delete them. When you click on a split, you will enter that split and can then edit the actions in the splits.'}),Object(b.jsx)("h2",{children:"Items and Delta String"}),Object(b.jsx)("p",{children:"During the run, each action may affect the current resources the player possesses. This tool is organized in the same way."}),Object(b.jsxs)("p",{children:["Each action in a split has a ",Object(b.jsx)("strong",{children:"delta string"})," that is used to define the resources changes as a result of that action."]}),Object(b.jsxs)("p",{children:["To define a delta string, you first must define the items. Follow the steps below to define an item:",Object(b.jsxs)("ol",{children:[Object(b.jsx)("li",{children:'Click on "New Item" under the "Resources" section'}),Object(b.jsx)("li",{children:'Click on "Edit" next to "Resources"'}),Object(b.jsx)("li",{children:'Enter the item name and press the "R" button next to the text box to rename the item'}),Object(b.jsx)("li",{children:'Click on "Finish" to exit the editing mode'})]}),"Now that you have defined your first item. It's time to write some delta strings."]}),Object(b.jsx)("h2",{children:"Delta String Syntax"}),Object(b.jsxs)("p",{children:["The basic syntax for the delta string is ",Object(b.jsx)("code",{children:"[(item)](operator)(quantity)"})]}),Object(b.jsxs)("ol",{children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("code",{children:"item"}),": The name of the item"]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("code",{children:"operator"}),": One of ",Object(b.jsx)("code",{children:"+"}),", ",Object(b.jsx)("code",{children:"-"}),", ",Object(b.jsx)("code",{children:"="})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("code",{children:"quantity"}),": How much to change"]})]}),Object(b.jsxs)("p",{children:["For example, ",Object(b.jsx)("code",{children:"[Apple]+5"})," means adding 5 apples to the resources during this action. (Given that ",Object(b.jsx)("code",{children:"Apple"})," is defined in the Resources section)"]}),Object(b.jsxs)("p",{children:["Similarly, ",Object(b.jsx)("code",{children:"[Orange]-3"})," means subtracting 3 oranges, and ",Object(b.jsx)("code",{children:"[Banana]=5"})," means setting the quantity of bananas to 5"]}),Object(b.jsx)("p",{children:"You can also use reference to the quantity of another item."}),Object(b.jsxs)("p",{children:["For example, ",Object(b.jsx)("code",{children:"[Rock]+[Wood]"})," means adding as many woods to rocks. If you have 5 woods and 8 rocks, you will now have 5 woods and 13 rocks."]}),Object(b.jsxs)("p",{children:["The reference is done in parallel. So, ",Object(b.jsx)("code",{children:"[Rock]=[Wood], [Wood]=[Rock]"})," will swap the quantities of woods and rocks."]}),Object(b.jsxs)("p",{children:["(Oh yeah, if you haven't already realize, use ",Object(b.jsx)("code",{children:","})," to separate multiple items like the example above)"]}),Object(b.jsx)("h2",{children:"Track Resources"}),Object(b.jsx)("p",{children:"You can use the Resources section to see all the resources defined. Use the filter text box to filter them. Multiple search word can be separated with comma (,). The search will give any item that contains any of the search words."}),Object(b.jsxs)("p",{children:["When you click on an action. ",Object(b.jsx)("strong",{children:"You are focused to that action. "})," The Resources section will now also show how the items changed in during that action, as well as the quantity ",Object(b.jsx)("strong",{children:"after"})," the action is done."]}),Object(b.jsx)("p",{children:"When your route gets longer. You may notice that the resource tracker takes time to finish calculating all the resources. When it's calculating, you can continue editing the route. However, the tracking result may not be accurate when it's not done calculating. Especially if it is something you just edited."}),Object(b.jsx)("h2",{children:"FAQ"}),Object(b.jsx)("p",{children:"I will put whatever questions people ask me here."}),Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Q: Why are some buttons disabled?"})}),Object(b.jsx)("p",{children:"A: I didn't finish implementing them"}),Object(b.jsx)("h2",{children:"Other"}),Object(b.jsxs)("p",{children:["Source on ",Object(b.jsx)("a",{href:"https://github.com/resource-routing/resource-routing.github.io",children:"Github"})]})]})})},wn=function(e){return{headerCollapsed:oe(e),sideCollapsed:se(e),resourceCollapsed:re(e),showHelp:me(e)}},Nn=function(e){return{actions:Object(Rt.b)({setRouteState:Le,setInfo:wt,setSettingState:Vt,markResourceDirtyAt:Ct},e)}},An=(Object(h.b)(wn,Nn),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={alertContent:void 0,alertActions:[],showIOAlert:!1,windowWidth:window.innerWidth},c}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWindowWidth.bind(this)),this.updateWindowWidth();var e=Object(tn.h)(),t=Object(o.a)(e,2),n=t[0],c=t[1];n?(this.props.actions.setRouteState({routeState:n}),this.props.actions.markResourceDirtyAt({globalIndex:0}),this.props.actions.setInfo({info:"Loaded from local storage"})):this.props.actions.setInfo({info:"Failed to load from local storage. Loaded empty project."}),c&&this.props.actions.setSettingState({settingState:c}),vn(),mn=setInterval(xn,100),gn(),On=setInterval(Sn,2e4)}},{key:"updateWindowWidth",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowWidth.bind(this)),vn(),gn()}},{key:"showAlert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{name:"OK"}];this.setState({alertContent:e,alertActions:t})}},{key:"renderHeaderAndSide",value:function(e,t){return Object(b.jsxs)(Lt,{size:e?"3.5rem":"10rem",children:[Object(b.jsx)(Ut,{className:"component border",children:Object(b.jsx)(nn,{appActions:t})}),Object(b.jsx)(Yt,{appActions:t})]})}},{key:"render",value:function(){var e,t=this,n={showAlert:this.showAlert.bind(this),showIODialog:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t.setState({showIOAlert:e})}},c=this.props,a=c.showHelp,i=c.headerCollapsed,r=c.sideCollapsed,o=c.resourceCollapsed,s=this.renderHeaderAndSide(i,n),l=a?Object(b.jsx)(yn,{}):Object(b.jsx)(dn,{appActions:n}),d=Object(b.jsx)(fn,{appActions:n});return e=this.state.windowWidth<1e3?Object(b.jsxs)(Lt,{base:"second",size:o?"1.8rem":"30%",min:o?void 0:"12rem",children:[Object(b.jsxs)(Lt,{direction:"horizontal",size:r?"2rem":"30%",min:r?"2rem":"16rem",max:r?"2rem":"24rem",children:[s,l]}),d]}):Object(b.jsxs)(Lt,{direction:"horizontal",size:r?"2rem":"30%",min:r?"2rem":"16rem",max:r?"2rem":"24rem",children:[s,Object(b.jsxs)(Lt,{base:"second",size:o?"1.8rem":"30%",min:o?void 0:"12rem",children:[l,d]})]}),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Pt,{children:Object(b.jsxs)(Lt,{base:"second",size:"1.5rem",children:[e,Object(b.jsx)(Ut,{className:"component border",children:Object(b.jsx)(cn,{})})]})}),Object(b.jsx)(un,{content:this.state.alertContent,alertActions:this.state.alertActions,actions:{hideAlert:function(){return t.showAlert()}}}),Object(b.jsx)(un,{content:this.state.showIOAlert?Object(b.jsx)(In,{appActions:n}):void 0,alertActions:[{name:"Close"}],actions:{hideAlert:function(){return t.setState({showIOAlert:!1})}}})]})}}]),n}(a.a.Component)),kn=Object(h.b)(wn,Nn)(An);r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(h.a,{store:Me,children:Object(b.jsx)(kn,{})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.0d4042f6.chunk.js.map