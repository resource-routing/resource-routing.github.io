(this["webpackJsonpresouce-routing"]=this["webpackJsonpresouce-routing"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(2),c=n(4),r=n(15);function i(){return{name:"",expanded:!0,splits:[]}}function o(e){return{name:e.name||"",splits:(e.splits||[]).map(r.d)}}function s(e){return{name:e.name||"",expanded:!1,splits:(e.splits||[]).map(r.e)}}function l(e,t){var n=e.name,a=e.splits,i=Object(c.i)(n),o=Object(c.g)(a,(function(e){return Object(r.b)(e,t)}));return"".concat(i).concat(o)}function u(e,t,n){var i=Object(c.d)(e,t),s=Object(a.a)(i,3),l=s[0],u=s[1],d=s[2];if(null!==d)return[o({name:"",expanded:!0,splits:[]}),-1,"Fail to decompress branch name: ".concat(d)];var h=Object(c.b)(e,u,(function(e,t){return Object(r.c)(e,t,n)})),b=Object(a.a)(h,3),p=b[0],j=b[1],f=b[2];return null!==f?[o({name:"",expanded:!0,splits:[]}),-1,"Fail to decompress branch splits: ".concat(f)]:[{name:l,splits:p},j,null]}},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(2);function c(e){return(e/=255)<=.03928?e/=12.92:e=(e+.055)/1.055^2.4,e}function r(){var e="0123456789abcdef",t=e[Math.floor(12*Math.random())+4],n=e[4*Math.floor(4*Math.random())],a=e[Math.floor(12*Math.random())+4],c=e[4*Math.floor(4*Math.random())],r=e[Math.floor(12*Math.random())+4],i=e[4*Math.floor(4*Math.random())];return"#".concat(t).concat(n).concat(a).concat(c).concat(r).concat(i)}function i(e){if(!e)return["black","white"];var t=function(e){if(!window.getComputedStyle)return[255,255,255];var t=document.getElementById("temp");if(null==t)return[255,255,255];t.style.color="white",t.style.color=e;var n=window.getComputedStyle(t).color;return"rgb(255, 255, 255)"===n?[255,255,255]:n.replace("rgb(","").replace(")","").split(",").map((function(e){return Number(e.trim())}))}(e),n=Object(a.a)(t,3),r=n[0],i=n[1],o=n[2];return 255===r&&255===i&&255===o?["black","white"]:function(e,t,n){return.2126*c(e)+.7152*c(t)+.0722*c(n)<1.8}(r,i,o)?["white",e]:["black",e]}},13:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(2),c=n(12),r=n(4);function i(){return{name:"",color:Object(c.b)()}}function o(e){return{name:e.name||"",color:e.color||""}}function s(e){return{name:e.name||"",color:e.color||""}}function l(e){var t=e.name,n=e.color,a=Object(r.i)(t.replace(/:/g,"_")),c=Object(r.i)(n);return"".concat(a).concat(c)}function u(e,t){var n=Object(r.d)(e,t),c=Object(a.a)(n,3),o=c[0],s=c[1],l=c[2];if(null!==l)return[i(),-1,"Fail to decompress item name: ".concat(l)];var u=Object(r.d)(e,s),d=Object(a.a)(u,3),h=d[0],b=d[1];return null!==d[2]?[i(),-1,"Fail to decompress item color: ".concat(l)]:[{name:o,color:h},b,null]}},14:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var a=n(2),c=n(4),r=n(8);function i(){return{name:"",expanded:!0,deltaString:"",deltaError:null,deltas:{}}}function o(e){var t=Object(r.f)(e.deltaString),n=Object(a.a)(t,2),c=n[0],i=n[1];return{name:e.name,expanded:e.expanded,deltaString:e.deltaString,deltaError:i,deltas:c}}function s(e){return{name:e.name||"",deltaString:e.deltaString||""}}function l(e){var t=Object(r.f)(e.deltaString),n=Object(a.a)(t,2),c=n[0],i=n[1];return{name:e.name||"",deltaString:e.deltaString||"",expanded:!1,deltas:c,deltaError:i}}function u(e,t){var n,i=e.name,o=e.deltaString,s=Object(c.i)(i),l=Object(r.f)(o),u=Object(a.a)(l,2),d=u[0],h=u[1],b=null!==h||null===d,p=Object(c.h)(b);return n=null!==h||null===d?Object(c.i)(o):Object(c.i)(Object(r.c)(d,t)),"".concat(s).concat(p).concat(n)}function d(e,t,n){var i=Object(c.d)(e,t),o=Object(a.a)(i,3),s=o[0],l=o[1],u=o[2];if(null!==u)return[{name:"",deltaString:""},-1,"Fail to decompress action name: ".concat(u)];var d=Object(c.c)(e,l),h=Object(a.a)(d,3),b=h[0],p=h[1],j=h[2];if(null!==j)return[{name:"",deltaString:""},-1,"Fail to decompress action delta error: ".concat(j)];var f,m=Object(c.d)(e,p),x=Object(a.a)(m,3),v=x[0],O=x[1],g=x[2];if(null!==g)return[{name:"",deltaString:""},-1,"Fail to decompress action delta string: ".concat(g)];if(b)f=v;else{var S=Object(r.a)(v,n),I=Object(a.a)(S,2),y=I[0],w=I[1];if(null!==w||null===y)return[{name:"",deltaString:""},-1,"Fail to decompress action delta: ".concat(w)];f=Object(r.d)(y)}return[{name:s,deltaString:f},O,null]}},15:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));n(48);var a=n(2),c=n(14),r=n(4);function i(){return{name:"",expanded:!0,actions:[]}}function o(e){return{name:e.name,expanded:e.expanded,actions:e.actions.map(c.a)}}function s(e){return{name:e.name||"",actions:(e.actions||[]).map(c.d)}}function l(e){return{name:e.name||"",expanded:!1,actions:(e.actions||[]).map(c.e)}}function u(e,t){var n=e.name,a=e.actions,i=Object(r.i)(n),o=Object(r.g)(a,(function(e){return Object(c.b)(e,t)}));return"".concat(i).concat(o)}function d(e,t,n){var i=Object(r.d)(e,t),o=Object(a.a)(i,3),l=o[0],u=o[1],d=o[2];if(null!==d)return[s({name:"",expanded:!0,actions:[]}),-1,"Fail to decompress split name: ".concat(d)];var h=Object(r.b)(e,u,(function(e,t){return Object(c.c)(e,t,n)})),b=Object(a.a)(h,3),p=b[0],j=b[1],f=b[2];return null!==f?[s({name:"",expanded:!0,actions:[]}),-1,"Fail to decompress split actions: ".concat(f)]:[{name:l,actions:p},j,null]}},4:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"j",(function(){return x}));var a=n(2),c=n(6),r=n(10),i=n(13),o=n(32),s=n.n(o);function l(e){var t=Object(c.a)(e),n=t.projectName,a=t.branches,o=t.items,s=d(n),l={};o.forEach((function(e,t){l[e.name]=t}));var u=j(a,(function(e){return Object(r.a)(e,l)})),h=j(o,i.a);return"".concat(s).concat(h).concat(u)}function u(e){var t=h(e,0),n=Object(a.a)(t,3),o=n[0],s=n[1],l=n[2];if(null!==l)return[null,"Fail to decompress project name: ".concat(l)];var u=f(e,s,i.b),d=Object(a.a)(u,3),b=d[0],p=d[1],j=d[2];if(null!==j)return[null,"Fail to decompress project items: ".concat(j)];var m=b.map((function(e){return e.name})),x=f(e,p,(function(e,t){return Object(r.b)(e,t,m)})),v=Object(a.a)(x,3),O=v[0],g=v[1],S=v[2];if(null!==S)return[null,"Fail to decompress project branches: ".concat(S)];if(g!==e.length)return[null,"Fail to decompress project: length mismatch"];var I={projectName:o,branches:O,items:b};return[Object(c.g)(I),null]}function d(e){return 0===e.length?":":"".concat(e.length,":").concat(e)}function h(e,t){var n=e.indexOf(":",t);if(n<t)return["null",-1,"Fail to decode: length not found"];if(n===t)return["",n+1,null];var a=Number(e.substring(t,n));return Number.isInteger(a)?n+a>=e.length?["null",-1,"Fail to decode: length out of bound: ".concat(a)]:[e.substring(n+1,n+1+a),n+a+1,null]:["null",-1,"Fail to decode: invalid length: ".concat(a)]}function b(e){return e?"T":"F"}function p(e,t){return t<0||t>=e.length?[!1,-1,"Fail to decode: index out of bound"]:"T"===e[t]?[!0,t+1,null]:"F"===e[t]?[!1,t+1,null]:[!1,-1,"Fail to decode: invalid boolean: ".concat(e[t])]}function j(e,t){return"[".concat(e.map(t).join(""),"]")}function f(e,t,n){if(t<0||t>=e.length)return[[],-1,"Fail to decode array: index out of bound"];if("["!==e[t])return[[],-1,"Fail to decode array: invalid array"];var c=[];for(t++;t<e.length&&"]"!==e[t];){var r=n(e,t),i=Object(a.a)(r,3),o=i[0],s=i[1],l=i[2];if(null!==l)return[[],-1,"Fail to decode array at element ".concat(c.length,": ").concat(l)];t=s,c.push(o)}return t>=e.length?[[],-1,"Fail to decode array: array not properly closed"]:[c,t+1,null]}function m(e){return s.a.deflateSync(e).toString("base64")}function x(t){return s.a.inflateSync(e.from(t,"base64")).toString()}}).call(this,n(16).Buffer)},55:function(e,t,n){},56:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"k",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return x})),n.d(t,"i",(function(){return v}));var a=n(2),c=n(10),r=n(13),i=n(4),o="RRT_COMPRESS_STATE",s="RRT_SETTINGS";function l(e){return{branches:(e.branches||[]).map(c.c),items:(e.items||[]).map(r.c),projectName:e.projectName||""}}function u(e){return{projectName:e.projectName||"",activeBranch:-1,activeSplit:-1,activeAction:-1,branches:(e.branches||[]).map(c.d),items:(e.items||[]).map(r.d)}}function d(e){return Object(i.f)(Object(i.a)(e))}function h(e){return JSON.stringify(l(e))}function b(e){var t=Object(i.j)(e);return Object(i.e)(t)}function p(e){return[u(JSON.parse(e)),null]}function j(e,t){var n=function(e){return Object(i.a)(e)}(e);localStorage.setItem(o,n),x(t)}function f(e,t,n){var a=new Blob([t],{type:"text"}),c=document.createElement("a"),r=e+"."+n;c.download=r,c.href=URL.createObjectURL(a),c.dataset.downloadurl=["text",c.download,c.href].join(":"),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),setTimeout((function(){URL.revokeObjectURL(c.href)}),1500)}function m(){var e,t=localStorage.getItem(o),n=localStorage.getItem(s);if(null===n?(console.error("Failed to load settings from localstorage"),e=void 0):e=JSON.parse(n),null===t)return console.error("Failed to load from localstorage"),[void 0,e];var c,r=(c=t,Object(i.e)(c)),l=Object(a.a)(r,2),u=l[0],d=l[1];return null!==d||null===u?(console.error("Failed to load from localstorage: ".concat(d)),[void 0,e]):[u,e]}function x(e){localStorage.setItem(s,JSON.stringify(e))}function v(e,t){if(e){var n=new FileReader;n.onloadend=function(){var e=n.result;t((null===e||void 0===e?void 0:e.toString())||"")},n.readAsText(e)}}},68:function(e,t){},70:function(e,t){},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return h}));var a=n(2);function c(e,t){for(var n in e)e[n].type.startsWith("ref")&&e[n].value===t&&delete e[n];t in e&&delete e[t]}function r(e,t,n){for(var a in e)e[a].type.startsWith("ref")&&e[a].value===t&&(e[a].value=n);t in e&&(e[n]=e[t],delete e[t])}function i(e){var t=[];for(var n in e)t.push(s(n,e[n]));return t.join(", ")}function o(e){if(!e||!e.length)return[{},null];if(!e.trim())return[{},null];var t=e.split(",").map((function(e){return e.trim()})),n={},c=[];return t.forEach((function(e){var t=function(e){if(!e||!e.length)return[null,null];if(!e.startsWith("["))return[null,"Invalid: ".concat(e)];var t=e.indexOf("]");if(t<0)return[null,"Item name bracket not closed: ".concat(e)];var n=e.substring(1,t);if(e.length<=t+1)return[null,"Item [".concat(n,"] missing operator and quantity")];var a=e[t+1],c=e.substring(t+2);if(0===c.length)return[null,"Item [".concat(n,"] has empty value")];return c.startsWith("[")?c.endsWith("]")?b(n,a,c.substring(1,c.length-1)):[null,"Item reference bracket not closed: ".concat(c)]:p(n,a,c)}(e.trim()),r=Object(a.a)(t,2),i=r[0],o=r[1];null!==i?i.name in n?c.push("Duplicate: ".concat(i.name)):n[i.name]={type:i.type,value:i.value}:null!==o&&c.push(o)})),c.length>0?[null,c.join("; ")]:[n,null]}function s(e,t){var n=t.type,c=h(n,t.value),r=Object(a.a)(c,2),i=r[0],o=r[1],s=o;return n.startsWith("ref")&&(s="[".concat(o,"]")),"[".concat(e,"]").concat(i).concat(s)}function l(e,t){var n=[];for(var a in e)n.push(d(a,t,e[a]));return n.join(",")}function u(e,t){if(!e||!e.length)return[{},null];if(!e.trim())return[{},null];var n=e.split(",").map((function(e){return e.trim()})),c={},r=[];return n.forEach((function(e){var n=function(e,t){if(!e||!e.length)return[null,null];var n=e.indexOf(":");if(n<0)return[null,"Item index not found: ".concat(e)];var a=e.substring(0,n);if(e.length<=n+1)return[null,"Item [".concat(a,"] missing operator and quantity")];var c,r=Number(a);if(Number.isInteger(r)){if(r<0||r>=t.length)return[null,"Invalid index: ".concat(a)];c=t[r]}else c=a;var i=e[n+1],o=e.substring(n+2);if(0===o.length)return[null,"Item [".concat(c,"] has empty value")];if(o.startsWith(":")){var s,l=o.substring(1),u=Number(l);if(Number.isInteger(u)){if(u<0||u>=t.length)return[null,"Invalid ref index: ".concat(l)];s=t[u]}else s=l;return b(c,i,s)}return p(c,i,o)}(e.trim(),t),i=Object(a.a)(n,2),o=i[0],s=i[1];null!==o?c[o.name]={type:o.type,value:o.value}:null!==s&&r.push(s)})),r.length>0?[null,r.join("; ")]:[c,null]}function d(e,t,n){var c=n.type,r=h(c,n.value),i=Object(a.a)(r,2),o=i[0],s=i[1],l=s;c.startsWith("ref")&&(l=":".concat(s in t?t[s]:s));var u=e;return u=e in t?t[e]:u.replace(/:/g,""),"".concat(u,":").concat(o).concat(l)}function h(e,t){switch(e){case"add":return t>=0?["+",t]:["-",-t];case"set":case"ref_set":return["=",t];case"ref_add":return["+",t];case"ref_sub":return["-",t];default:return["?",t]}}function b(e,t,n){var a;switch(t){case"+":a="ref_add";break;case"-":a="ref_sub";break;case"=":a="ref_set";break;default:return[null,"Item [".concat(e,']: unknown operator "').concat(t,'"')]}return[{name:e,type:a,value:n},null]}function p(e,t,n){var a,c=Number(n);if(!Number.isInteger(c))return[null,"Item [".concat(e,']: invalid quantity "').concat(n)];switch(t){case"+":a="add";break;case"-":a="add",c=-c;break;case"=":a="set";break;default:return[null,"Item [".concat(e,']: unknown operator "').concat(t,'"')]}return[{name:e,type:a,value:c},null]}},91:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(24),i=n.n(r),o=(n(55),n(2)),s=n(43),l=n(44),u=n(50),d=n(49),h=(n(56),n(45)),b=n(0),p=function(e){var t=e.layout,n=e.children,a=e.borderClass;return Object(b.jsx)("div",{className:Object(h.a)("component",a),style:{position:"absolute",top:t.y,left:t.x,width:t.w,height:t.h},children:n})},j=n(3),f=function(e){var t=e.expanded,n=e.setExpanded;return Object(b.jsx)("button",{className:"icon-button",onClick:function(){return n(!t)},children:t?"-":"+"})};function m(e){return e.routeState}function x(e){return m(e).projectName}function v(e){return m(e).activeBranch}function O(e){return m(e).activeSplit}function g(e){var t=v(e),n=O(e);if(t>=0&&n>=0)return H(e,t,n)}function S(e){var t;return null===(t=g(e))||void 0===t?void 0:t.name}function I(e){var t;return null===(t=g(e))||void 0===t?void 0:t.actions}function y(e){var t;return null===(t=I(e))||void 0===t?void 0:t.length}function w(e,t){var n=I(e);return void 0===n?void 0:n[t]}function N(e,t){var n;return null===(n=w(e,t))||void 0===n?void 0:n.name}function A(e,t){var n;return null===(n=w(e,t))||void 0===n?void 0:n.expanded}function C(e,t){var n;return null===(n=w(e,t))||void 0===n?void 0:n.deltaString}function k(e,t){var n,a=null===(n=w(e,t))||void 0===n?void 0:n.deltaError;return a||void 0}function B(e,t){var n,a=null===(n=w(e,t))||void 0===n?void 0:n.deltas;return a||void 0}function E(e){return m(e).activeAction}function R(e){var t=E(e);if(!(t<0)){var n=w(e,t);return null===n||void 0===n?void 0:n.name}}function F(e){return m(e).branches}function D(e,t){return F(e)[t]}function T(e){return F(e).length}function M(e,t){return D(e,t).name}function W(e,t){return D(e,t).expanded}function L(e,t){return D(e,t).splits}function H(e,t,n){return L(e,t)[n]}function _(e,t){return L(e,t).length}function U(e,t,n){return H(e,t,n).name}function P(e,t,n){return H(e,t,n).expanded}function Y(e,t,n){return H(e,t,n).actions}function q(e,t,n,a){return Y(e,t,n)[a]}function J(e,t,n){return Y(e,t,n).length}function z(e,t,n,a){return""===q(e,t,n,a).deltaString}function X(e,t,n,a){return q(e,t,n,a).name}function G(e,t,n,a){return q(e,t,n,a).deltas}function Q(e,t,n,a){for(var c=0,r=0;r<t;r++)for(var i=_(e,r),o=0;o<i;o++)c+=J(e,r,o);for(var s=0;s<n;s++)c+=J(e,t,s);return c+a}function K(e){var t=0;return F(e).forEach((function(e){e.splits.forEach((function(e){t+=e.actions.length}))})),t}function V(e){return m(e).items}function Z(e,t){var n;return null===(n=function(e,t){var n=V(e).filter((function(e){return e.name===t}));if(0!==n.length)return n[0]}(e,t))||void 0===n?void 0:n.color}function $(e,t){return V(e)[t].name}function ee(e,t){return V(e)[t].color}function te(e){return V(e).length}var ne=function(e,t){return{isNote:z(e,t.branchIndex,t.splitIndex,t.actionIndex),name:X(e,t.branchIndex,t.splitIndex,t.actionIndex)}},ae=(Object(j.b)(ne),Object(j.b)(ne)((function(e){var t=e.isNote,n=e.name||"[Unnamed Action]";return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{}),Object(b.jsx)("td",{}),Object(b.jsx)("td",{className:"icon-button-width",children:">"}),Object(b.jsx)("td",{colSpan:8,children:t?Object(b.jsx)("em",{children:n}):n})]})}))),ce=Object(j.b)((function(e,t){return{length:J(e,t.branchIndex,t.splitIndex)}}))((function(e){for(var t=e.length,n=e.branchIndex,a=e.splitIndex,c=[],r=0;r<t;r++)c.push(Object(b.jsx)(ae,{branchIndex:n,splitIndex:a,actionIndex:r},r));return Object(b.jsx)(b.Fragment,{children:c})}));function re(e){return e.applicationState}function ie(e){return re(e).info}function oe(e){return re(e).shrinkSide}function se(e){return re(e).resourcesCollapsed}function le(e){return re(e).headerCollapsed}function ue(e){return re(e).sideCollapsed}function de(e){return re(e).layout}function he(e){return de(e).header}function be(e){return de(e).side}function pe(e){return de(e).side.header}function je(e){return de(e).side.main}function fe(e){return de(e).actions}function me(e){return de(e).actions.header}function xe(e){return de(e).actions.main}function ve(e){return de(e).footer}function Oe(e){return de(e).resources}function ge(e){return de(e).resources.header}function Se(e){return de(e).resources.main}function Ie(e){return re(e).editingNav}function ye(e){return re(e).editingActions}function we(e){return re(e).editingItems}function Ne(e){return re(e).splitClipboard}function Ae(e){return re(e).resources}function Ce(e){return Ae(e).progress}function ke(e){return Ae(e).error}function Be(e,t){return Ae(e).content[t]}function Ee(e){return re(e).showOnlyChangedResources}function Re(e){return re(e).showHelp}var Fe=n(5),De=n(7),Te=n(14),Me=n(10),We=n(8),Le=n(13),He=64,_e=128,Ue=512,Pe=n(15);function Ye(e,t){var n=T(e);return t>=0&&t<n}function qe(e,t,n){return!!Ye(e,t)&&(n>=0&&n<_(e,t))}function Je(e,t){return t>=0&&t<te(e)}function ze(e,t,n,a){return!!qe(e,t,n)&&(a>=0&&a<J(e,t,n))}var Xe={setRouteState:function(e,t){e.routeState=t.payload.routeState},setProjectName:function(e,t){e.routeState.projectName=t.payload.projectName},setActiveBranchAndSplit:function(e,t){e.routeState.activeBranch=t.payload.activeBranch,e.routeState.activeSplit=t.payload.activeSplit,e.routeState.activeAction=-1},setActiveAction:function(e,t){e.routeState.activeAction=t.payload.activeAction},createBranch:function(e,t){var n=t.payload.branchIndex;if(!(T(e)>=He)){var a=Object(Me.e)();if(Ye(e,n)){e.routeState.branches.splice(n,0,a);var c=v(e);c>=n&&(e.routeState.activeBranch=c+1)}else e.routeState.branches.push(a)}},setBranchName:function(e,t){var n=t.payload,a=n.branchIndex,c=n.name;e.routeState.branches[a].name=c},setBranchExpanded:function(e,t){var n=t.payload,a=n.branchIndex,c=n.expanded;e.routeState.branches[a].expanded=c},deleteBranch:function(e,t){var n=t.payload.branchIndex;e.routeState.branches.splice(n,1);var a=v(e);a===n?e.routeState.activeBranch=-1:a>n&&(e.routeState.activeBranch=a-1)},swapBranches:function(e,t){var n=t.payload,a=n.i,c=n.j;if(Ye(e,a)&&Ye(e,c)){var r=e.routeState.branches[a];e.routeState.branches[a]=e.routeState.branches[c],e.routeState.branches[c]=r;var i=v(e);i===a?e.routeState.activeBranch=c:i===c&&(e.routeState.activeBranch=a)}},mergeNextIntoBranch:function(e,t){var n=t.payload.branchIndex;if(n!==T(e)-1&&Ye(e,n)){var a=_(e,n);if(!(a+_(e,n+1)>=_e)){e.routeState.branches[n].splits=e.routeState.branches[n].splits.concat(e.routeState.branches[n+1].splits),e.routeState.branches.splice(n+1,1);var c=v(e);c===n+1&&(e.routeState.activeBranch=c-1,e.routeState.activeSplit+=a)}}},breakBranchAt:function(e,t){if(!(T(e)>=He)){var n=t.payload,a=n.branchIndex,c=n.splitIndex;if(qe(e,a,c)){var r=e.routeState.branches[a].splits.slice(c);e.routeState.branches[a].splits=e.routeState.branches[a].splits.slice(0,c);var i=Object(Me.e)();i.expanded=!0,i.splits=r,e.routeState.branches.splice(a+1,0,i);var o=v(e),s=O(e);o===a&&s>=c&&(e.routeState.activeBranch=o+1,e.routeState.activeSplit-=c)}}},createSplit:function(e,t){var n=t.payload,a=n.branchIndex,c=n.splitIndex,r=n.templateSplit;if(Ye(e,a)&&!(_(e,a)>=_e)){var i=r?Object(Pe.a)(r):Object(Pe.f)();if(qe(e,a,c)){if(e.routeState.branches[a].splits.splice(c,0,i),v(e)===a){var o=O(e);o>=c&&(e.routeState.activeSplit=o+1)}}else e.routeState.branches[a].splits.push(i)}},setSplitName:function(e,t){var n=t.payload,a=n.branchIndex,c=n.splitIndex,r=n.name;e.routeState.branches[a].splits[c].name=r},setSplitExpanded:function(e,t){var n=t.payload,a=n.branchIndex,c=n.splitIndex,r=n.expanded;e.routeState.branches[a].splits[c].expanded=r},deleteSplit:function(e,t){var n=t.payload,a=n.branchIndex,c=n.splitIndex;if(qe(e,a,c)&&(e.routeState.branches[a].splits.splice(c,1),v(e)===a)){var r=O(e);r===c?e.routeState.activeSplit=-1:r>c&&(e.routeState.activeSplit=r-1)}},swapSplits:function(e,t){var n=t.payload,a=n.branchIndex,c=n.i,r=n.j;if(qe(e,a,c)&&qe(e,a,r)){var i=e.routeState.branches[a].splits[c];if(e.routeState.branches[a].splits[c]=e.routeState.branches[a].splits[r],e.routeState.branches[a].splits[r]=i,v(e)===a){var o=O(e);o===c?e.routeState.activeSplit=r:o===r&&(e.routeState.activeSplit=c)}}},moveFirstSplitToPreviousBranch:function(e,t){var n=t.payload.branchIndex;if(Ye(e,n)&&Ye(e,n-1)&&!(_(e,n)<=0)){var a=_(e,n-1);e.routeState.branches[n-1].splits.push(e.routeState.branches[n].splits[0]),e.routeState.branches[n].splits.splice(0,1),v(e)===n&&(0===O(e)?(e.routeState.activeBranch=n-1,e.routeState.activeSplit=a):e.routeState.activeSplit-=1)}},moveLastSplitToNextBranch:function(e,t){var n=t.payload.branchIndex;if(Ye(e,n)&&Ye(e,n+1)&&!(_(e,n)<=0)){var a=_(e,n)-1;e.routeState.branches[n+1].splits.splice(0,0,e.routeState.branches[n].splits[a]),e.routeState.branches[n].splits.pop(),v(e)===n?O(e)===a&&(e.routeState.activeBranch=n+1,e.routeState.activeSplit=0):v(e)===n+1&&(e.routeState.activeSplit+=1)}},createItem:function(e,t){var n=t.payload.index,a=Object(Le.e)();te(e)>=Ue||(Je(e,n)?e.routeState.items.splice(n,0,a):e.routeState.items.push(a))},setItemName:function(e,t){var n=t.payload,a=n.index,c=n.name,r=e.routeState.items[a].name;e.routeState.items[a].name=c;for(var i=0;i<T(e);i++)for(var o=0;o<_(e,i);o++)for(var s=0;s<J(e,i,o);s++){var l=G(e,i,o,s);null!==l&&(Object(We.e)(l,r,c),e.routeState.branches[i].splits[o].actions[s].deltaString=Object(We.d)(l))}},setItemColor:function(e,t){var n=t.payload,a=n.index,c=n.color;e.routeState.items[a].color=c},swapItems:function(e,t){var n=t.payload,a=n.i,c=n.j;if(Je(e,a)&&Je(e,c)){var r=e.routeState.items[a];e.routeState.items[a]=e.routeState.items[c],e.routeState.items[c]=r}},deleteItem:function(e,t){var n,a=t.payload.index;if(Je(e,a)){var c=e.routeState.items[a];e.routeState.items.splice(a,1),n=c.name}else{var r=e.routeState.items.pop();if(void 0===r)return;n=r.name}for(var i=0;i<T(e);i++)for(var o=0;o<_(e,i);o++)for(var s=0;s<J(e,i,o);s++){var l=G(e,i,o,s);if(null!==l){Object(We.b)(l,n);var u=Object(We.d)(l);e.routeState.branches[i].splits[o].actions[s].deltaString=u,""===u&&v(e)===i&&O(e)===o&&E(e)===s&&(e.routeState.activeAction=-1)}}},createAction:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex,o=t.payload.actionIndex;if(qe(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e))&&!(J(e,r,i)>=32)){var s=Object(Te.f)();if(ze(e,r,i,o)){e.routeState.branches[r].splits[i].actions.splice(o,0,s);var l=v(e),u=O(e);if(l===r&&u===i)E(e)>=o&&(e.routeState.activeAction+=1)}else e.routeState.branches[r].splits[i].actions.push(s)}},setActionName:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex,o=t.payload,s=o.actionIndex,l=o.name;ze(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e),s)&&(e.routeState.branches[r].splits[i].actions[s].name=l)},setActionExpanded:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex,o=t.payload,s=o.actionIndex,l=o.expanded;ze(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e),s)&&(e.routeState.branches[r].splits[i].actions[s].expanded=l)},setActionDeltaString:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex,s=t.payload,l=s.actionIndex,u=s.deltaString;if(ze(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e),l)){""===u&&v(e)===r&&O(e)===i&&E(e)===l&&(e.routeState.activeAction=-1),e.routeState.branches[r].splits[i].actions[l].expanded=!0,e.routeState.branches[r].splits[i].actions[l].deltaString=u;var d=Object(We.f)(u),h=Object(o.a)(d,2),b=h[0],p=h[1];if(p)e.routeState.branches[r].splits[i].actions[l].deltaError=p,e.routeState.branches[r].splits[i].actions[l].deltas=null;else{if(null!==b){var j=function(e,t){var n=V(e).map((function(e){return e.name})).sort();t.sort();for(var a=0,c=0,r=[];a<n.length&&c<t.length;)t[c]<n[a]?(r.push(t[c]),c++):t[c]>n[a]?a++:(a++,c++);for(;c<t.length;c++)r.push(t[c]);return r}(e,Object.keys(b));if(j.length>0){var f="Undefined item(s): ".concat(j.join(", "));return e.routeState.branches[r].splits[i].actions[l].deltaError=f,void(e.routeState.branches[r].splits[i].actions[l].deltas=null)}}e.routeState.branches[r].splits[i].actions[l].deltaError=null,e.routeState.branches[r].splits[i].actions[l].deltas=b}}},deleteAction:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex,o=t.payload.actionIndex;if(ze(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e),o)&&(e.routeState.branches[r].splits[i].actions.splice(o,1),v(e)===r&&O(e)===i)){var s=E(e);s===o?e.routeState.activeAction=-1:s>o&&(e.routeState.activeAction-=1)}},swapActions:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex,o=t.payload,s=o.i,l=o.j;if(ze(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e),s)&&ze(e,r,i,l)){var u=e.routeState.branches[r].splits[i].actions[s];if(e.routeState.branches[r].splits[i].actions[s]=e.routeState.branches[r].splits[i].actions[l],e.routeState.branches[r].splits[i].actions[l]=u,v(e)===r&&O(e)===i){var d=E(e);d===s?e.routeState.activeAction=l:d===l&&(e.routeState.activeAction=s)}}}};function Ge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(t.join(" "),")")}function Qe(e,t){return"max(".concat(e,", ").concat(t,")")}var Ke={x:"0",y:"0",w:"0",h:"0"};function Ve(e){var t,n=e.sideCollapsed,a=e.resourcesCollapsed,c=e.headerCollapsed,r=e.shrink,i="100vw",o="100vh",s="1.5rem",l="2rem",u="3.2rem",d=c?"3.5rem":"10rem",h=Ge(o,"-",d,"-",s),b=n?"2rem":Qe("16rem",(t="30%","min(".concat("24rem",", ").concat(t,")"))),p=Ge(i,"-",b),j=a?"1.8rem":Qe("12rem","30%"),f=Ge(o,"-",j,"-",s),m=Ge(o,"-",s,"-",j);return{header:{x:"0",y:"0",w:b,h:d},side:{x:"0",y:d,w:b,h:r?Ge(h,"-",j):h,header:{x:"0",y:"0",w:"100%",h:l},main:{x:"0",y:l,w:"100%",h:Ge("100%","-",l)}},footer:{x:"0",y:Ge(o,"-",s),w:i,h:s},resources:{x:r?"0":b,y:m,w:r?i:p,h:j,header:{x:"0",y:"0",w:"100%",h:u},main:{x:"0",y:u,w:"100%",h:Ge("100%","-",u)}},actions:{x:b,y:"0",w:p,h:f,header:{x:"0",y:"0",w:"100%",h:l},main:{x:"0",y:l,w:"100%",h:Ge("100%","-",l)}}}}function Ze(e){return{sideCollapsed:ue(e),resourcesCollapsed:se(e),headerCollapsed:le(e),shrink:oe(e)}}function $e(e,t){var n=Ce(e);if(!(n>=0&&n<t)){e.applicationState.resources.progress=t;var a=ke(e);if(null!==a)Q(e,a.branch,a.split,a.action)>=t&&(e.applicationState.resources.error=null)}}var et={setWindowWidth:function(e,t){var n=t.payload.width<1e3;oe(e)!==n&&(e.applicationState.layout=Ve(Object(Fe.a)(Object(Fe.a)({},Ze(e)),{},{shrink:n})),e.applicationState.shrinkSide=n)},doLayout:function(e){var t=window.innerWidth<1e3;e.applicationState.layout=Ve(Object(Fe.a)(Object(Fe.a)({},Ze(e)),{},{shrink:t})),e.applicationState.shrinkSide=t},setHeaderCollapsed:function(e,t){var n=t.payload.collapsed;n!==le(e)&&(e.applicationState.headerCollapsed=n,e.applicationState.layout=Ve(Object(Fe.a)(Object(Fe.a)({},Ze(e)),{},{headerCollapsed:n})))},setSideCollapsed:function(e,t){var n=t.payload.collapsed;n!==ue(e)&&(e.applicationState.sideCollapsed=n,e.applicationState.layout=Ve(Object(Fe.a)(Object(Fe.a)({},Ze(e)),{},{sideCollapsed:n})))},setResourcesCollapsed:function(e,t){var n=t.payload.collapsed;n!==se(e)&&(e.applicationState.resourcesCollapsed=n,e.applicationState.layout=Ve(Object(Fe.a)(Object(Fe.a)({},Ze(e)),{},{resourcesCollapsed:n})))},setEditingNav:function(e,t){e.applicationState.editingNav=t.payload.editing},setEditingActions:function(e,t){e.applicationState.editingActions=t.payload.editing},setEditingItems:function(e,t){e.applicationState.editingItems=t.payload.editing},setInfo:function(e,t){e.applicationState.info=t.payload.info},setSplitClipboard:function(e,t){e.applicationState.splitClipboard=t.payload.split},setResourceContent:function(e,t){var n=t.payload,a=n.globalIndex,c=n.content;e.applicationState.resources.content[a]=c,e.applicationState.resources.progress=a+1},setResourceError:function(e,t){e.applicationState.resources.error=t.payload.error},markResourceDirtyAt:function(e,t){$e(e,t.payload.globalIndex)},markResourceDirtyAtSplit:function(e,t){var n,a,c=t.payload,r=c.branchIndex,i=c.splitIndex;$e(e,Q(e,r=null!==(n=r)&&void 0!==n?n:v(e),i=null!==(a=i)&&void 0!==a?a:O(e),0))},setShowOnlyChangedResources:function(e,t){e.applicationState.showOnlyChangedResources=t.payload.showOnlyChangedResources},setShowingHelp:function(e,t){e.applicationState.showHelp=t.payload.showHelp}},tt={routeState:{projectName:"Unnamed Project",activeBranch:-1,activeSplit:-1,activeAction:-1,branches:[],items:[]},settingState:{autoSave:!0,onlyShowChangedItems:!1,itemFilter:""},applicationState:{layout:{header:Ke,side:Object(Fe.a)(Object(Fe.a)({},Ke),{},{main:Ke,header:Ke}),footer:Ke,resources:Object(Fe.a)(Object(Fe.a)({},Ke),{},{header:Ke,main:Ke}),actions:Object(Fe.a)(Object(Fe.a)({},Ke),{},{header:Ke,main:Ke}),map:Ke},sideCollapsed:!1,headerCollapsed:!0,resourcesCollapsed:!1,noResources:!1,shrinkSide:!1,editingNav:!1,editingActions:!1,editingItems:!1,info:"",splitClipboard:void 0,resources:{error:null,content:[],progress:-1},showOnlyChangedResources:!1,showHelp:!1}},nt=Object(De.b)({name:"state",initialState:tt,reducers:Object(Fe.a)(Object(Fe.a)(Object(Fe.a)({},Xe),et),{setSettingState:function(e,t){e.settingState=t.payload.settingState},setItemFilter:function(e,t){e.settingState.itemFilter=t.payload.filter},setAutoSaveEnabled:function(e,t){e.settingState.autoSave=t.payload.enabled}})}),at=nt.actions,ct=Object(De.a)({reducer:nt.reducer}),rt=at.setRouteState,it=at.setActiveBranchAndSplit,ot=at.setActiveAction,st=at.createBranch,lt=at.setBranchName,ut=at.setBranchExpanded,dt=at.deleteBranch,ht=at.swapBranches,bt=at.mergeNextIntoBranch,pt=at.breakBranchAt,jt=at.createSplit,ft=at.setSplitName,mt=at.setSplitExpanded,xt=at.deleteSplit,vt=at.swapSplits,Ot=at.moveFirstSplitToPreviousBranch,gt=at.moveLastSplitToNextBranch,St=at.createItem,It=at.setItemName,yt=at.setItemColor,wt=at.swapItems,Nt=at.deleteItem,At=at.createAction,Ct=at.setActionName,kt=at.setActionExpanded,Bt=at.deleteAction,Et=at.swapActions,Rt=at.setActionDeltaString,Ft=at.setProjectName,Dt=at.setWindowWidth,Tt=at.doLayout,Mt=at.setHeaderCollapsed,Wt=at.setSideCollapsed,Lt=at.setResourcesCollapsed,Ht=at.setEditingNav,_t=at.setEditingActions,Ut=at.setEditingItems,Pt=at.setInfo,Yt=at.setSplitClipboard,qt=at.setResourceContent,Jt=at.setResourceError,zt=at.markResourceDirtyAt,Xt=at.markResourceDirtyAtSplit,Gt=at.setShowOnlyChangedResources,Qt=at.setShowingHelp,Kt=n(9);function Vt(){return(new Date).getTime()}function Zt(e){return(new Date).getTime()-e}var $t=Object(j.b)((function(e,t){var n=t.branchIndex,a=t.splitIndex;return{name:U(e,n,a),expanded:P(e,n,a),isLastBranch:T(e)===n+1,editing:Ie(e),copiedSplit:Ne(e),splitToCopy:H(e,n,a),splitCount:_(e,n)}}),(function(e){return{actions:Object(Kt.b)({setSplitExpanded:mt,setSplitName:ft,breakBranchAt:pt,setInfo:Pt,deleteSplit:xt,createSplit:jt,setSplitClipboard:Yt,swapSplits:vt,moveFirstSplitToPreviousBranch:Ot,moveLastSplitToNextBranch:gt,setActiveBranchAndSplit:it,setEditingActions:_t,markResourceDirtyAtSplit:Xt,setShowingHelp:Qt},e)}}))((function(e){var t,n=e.branchIndex,a=e.splitIndex,c=e.name,r=e.expanded,i=e.isLastBranch,o=e.editing,s=e.actions,l=e.appActions,u=e.copiedSplit,d=e.splitToCopy,h=e.splitCount,p=a===h-1,j=0===n,m=0===a,x=c||"[Unnamed Split]",v=Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)(f,{expanded:r,setExpanded:function(e){s.setSplitExpanded({branchIndex:n,splitIndex:a,expanded:e})}})}),O=function(e){if(h>=_e){var t="You have reached the maximum number of splits per branch (".concat(_e,")");l.showAlert(t,void 0),s.setInfo({info:t})}else{var c=Vt();s.createSplit({branchIndex:n,splitIndex:a+1,templateSplit:e}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:a}),s.setInfo({info:"Split created. (".concat(Zt(c)," ms)")})}};return t=o?Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Break branch",onClick:function(){var e=Vt();s.breakBranchAt({branchIndex:n,splitIndex:a}),s.setInfo({info:"Branch broken. (".concat(Zt(e)," ms)")})},children:"/"})}),v,Object(b.jsx)("td",{colSpan:3,children:Object(b.jsx)("input",{className:"full-width",placeholder:"Split Name",type:"text",value:c,onChange:function(e){s.setSplitName({branchIndex:n,splitIndex:a,name:e.target.value})}})}),Object(b.jsx)("td",{className:"icon-button-width",children:!(m&&j)&&Object(b.jsx)("button",{className:"icon-button",disabled:m&&j,title:"Move up",onClick:function(){var e=Vt();m?(s.moveFirstSplitToPreviousBranch({branchIndex:n}),s.setInfo({info:"Split moved into previous branch. (".concat(Zt(e)," ms)")})):(s.swapSplits({branchIndex:n,i:a,j:a-1}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:a-1}),s.setInfo({info:"Split moved. (".concat(Zt(e)," ms)")}))},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!(p&&i)&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:p&&i,onClick:function(){var e=Vt();p?(s.moveLastSplitToNextBranch({branchIndex:n}),s.setInfo({info:"Split moved into next branch. (".concat(Zt(e)," ms)")})):(s.swapSplits({branchIndex:n,i:a,j:a+1}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:a}),s.setInfo({info:"Split moved. (".concat(Zt(e)," ms)")}))},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Copy",onClick:function(){var e=Vt();s.setSplitClipboard({split:d}),s.setInfo({info:"Split copied. (".concat(Zt(e)," ms)")})},children:"c"})}),Object(b.jsx)("td",{className:"icon-button-width",children:void 0!==u&&Object(b.jsx)("button",{className:"icon-button",title:"Paste Split Below",disabled:void 0===u,onClick:function(){O(u)},children:"p"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){l.showAlert('Delete split "'.concat(c,'"? All actions inside this split will also be deleted. This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Vt();s.deleteSplit({branchIndex:n,splitIndex:a}),s.markResourceDirtyAtSplit({branchIndex:n,splitIndex:a}),s.setInfo({info:"Split deleted. (".concat(Zt(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Split Below",onClick:function(){O(void 0)},children:"*"})})]}):Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width"}),v,Object(b.jsx)("td",{colSpan:9,children:Object(b.jsx)("u",{className:"split-link",onClick:function(){s.setActiveBranchAndSplit({activeBranch:n,activeSplit:a}),s.setEditingActions({editing:!1}),s.setShowingHelp({showHelp:!1})},children:x})})]}),r?Object(b.jsxs)(b.Fragment,{children:[t,Object(b.jsx)(ce,{branchIndex:n,splitIndex:a})]}):t})),en=Object(j.b)((function(e,t){var n=t.branchIndex;return{length:_(e,n),editing:Ie(e),isLastBranch:T(e)===n+1,currentBranchName:M(e,n),nextBranchName:n===T(e)-1?void 0:M(e,n+1),copiedSplit:Ne(e)}}),(function(e){return{actions:Object(Kt.b)({createSplit:jt,setInfo:Pt,mergeNextIntoBranch:bt,markResourceDirtyAtSplit:Xt},e)}}))((function(e){for(var t=e.branchIndex,n=e.isLastBranch,a=e.length,c=e.editing,r=e.copiedSplit,i=e.currentBranchName,o=e.nextBranchName,s=e.actions,l=e.appActions,u=[],d=0;d<a;d++)u.push(Object(b.jsx)($t,{branchIndex:t,splitIndex:d,appActions:l},"split_".concat(d,"_")));var h=function(e){if(a>=_e){var n="You have reached the maximum number of splits per branch (".concat(_e,")");l.showAlert(n),s.setInfo({info:n})}else{var c=Vt();s.createSplit({branchIndex:t,splitIndex:a,templateSplit:e}),s.markResourceDirtyAtSplit({branchIndex:t,splitIndex:a}),s.setInfo({info:"Split created. (".concat(Zt(c)," ms)")})}};return Object(b.jsxs)(b.Fragment,{children:[u,Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width",children:c&&!n&&Object(b.jsx)("button",{className:"icon-button",title:"Merge branch",disabled:n,onClick:function(){l.showAlert('Merge branch "'.concat(o,'" into "').concat(i,'"?'),[{name:"Cancel"},{name:"Merge",execute:function(){var e=Vt();s.mergeNextIntoBranch({branchIndex:t}),s.setInfo({info:"Branch merged. (".concat(Zt(e)," ms)")})}}])},children:"^"})}),Object(b.jsxs)("td",{colSpan:10,children:[Object(b.jsx)("button",{onClick:function(){h(void 0)},children:"New Split"}),Object(b.jsx)("button",{className:"space-left-small",disabled:void 0===r,onClick:function(){h(r)},children:"Paste Split"})]})]})]})})),tn=Object(j.b)((function(e,t){var n=t.index;return{name:M(e,n),expanded:W(e,n),editing:Ie(e),branchCount:T(e)}}),(function(e){return{actions:Object(Kt.b)({createBranch:st,setBranchName:lt,setBranchExpanded:ut,deleteBranch:dt,setInfo:Pt,swapBranches:ht,setEditingNav:Ht,markResourceDirtyAtSplit:Xt},e)}}))((function(e){var t,n=e.index,a=e.name,c=e.expanded,r=e.editing,i=e.actions,o=e.branchCount,s=e.appActions,l=a||"[Unnamed Branch]",u=0===n,d=n===o-1,h=Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)(f,{expanded:c,setExpanded:function(e){i.setBranchExpanded({branchIndex:n,expanded:e})}})});return t=r?Object(b.jsxs)("tr",{children:[h,Object(b.jsx)("td",{colSpan:6,children:Object(b.jsx)("input",{className:"full-width",placeholder:"Branch Name",type:"text",value:a,onChange:function(e){i.setBranchName({branchIndex:n,name:e.target.value})}})}),Object(b.jsx)("td",{className:"icon-button-width",children:!u&&Object(b.jsx)("button",{className:"icon-button",title:"Move up",disabled:u,onClick:function(){var e=Vt();i.swapBranches({i:n,j:n-1}),i.markResourceDirtyAtSplit({branchIndex:n-1,splitIndex:0}),i.setInfo({info:"Branch moved. (".concat(Zt(e)," ms)")})},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!d&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:d,onClick:function(){var e=Vt();i.swapBranches({i:n,j:n+1}),i.markResourceDirtyAtSplit({branchIndex:n,splitIndex:0}),i.setInfo({info:"Branch moved. (".concat(Zt(e)," ms)")})},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){s.showAlert('Delete branch "'.concat(a,'"? All splits inside this branch will also be deleted. This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Vt();i.deleteBranch({branchIndex:n}),i.markResourceDirtyAtSplit({branchIndex:n,splitIndex:0}),i.setInfo({info:"Branch deleted. (".concat(Zt(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Branch Below",onClick:function(){if(o>=He){var e="You have reached the maximum number of branches (".concat(He,")");s.showAlert(e),i.setInfo({info:e})}else{var t=Vt();i.createBranch({branchIndex:n+1}),i.markResourceDirtyAtSplit({branchIndex:n+1,splitIndex:0}),i.setEditingNav({editing:!0}),i.setInfo({info:"Branch created. (".concat(Zt(t)," ms)")})}},children:"*"})})]}):Object(b.jsxs)("tr",{children:[h,Object(b.jsx)("td",{colSpan:10,children:Object(b.jsx)("strong",{children:l})})]}),c?Object(b.jsxs)(b.Fragment,{children:[t,Object(b.jsx)(en,{branchIndex:n,appActions:s})]}):t})),nn=Object(j.b)((function(e){return{length:T(e)}}),(function(e){return{actions:Object(Kt.b)({createBranch:st,setEditingNav:Ht,setInfo:Pt,markResourceDirtyAtSplit:Xt},e)}}))((function(e){for(var t=e.length,n=e.actions,a=e.appActions,c=[],r=0;r<t;r++)c.push(Object(b.jsx)(tn,{index:r,appActions:a},r));return Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[c,Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:11,children:Object(b.jsx)("button",{onClick:function(){if(t>=He){var e="You have reached the maximum number of branches (".concat(He,")");a.showAlert(e),n.setInfo({info:e})}else{var c=Vt();n.createBranch({branchIndex:t}),n.markResourceDirtyAtSplit({branchIndex:t,splitIndex:0}),n.setEditingNav({editing:!0}),n.setInfo({info:"Branch created. (".concat(Zt(c)," ms)")})}},children:"New Branch"})})},"new_branch_button")]})})})),an=Object(j.b)((function(e){return{sideHeaderBounds:pe(e),sideMainBounds:je(e),sideCollapsed:ue(e),editing:Ie(e)}}),(function(e){return{actions:Object(Kt.b)({setSideCollapsed:Wt,setEditingNav:Ht},e)}}))((function(e){var t=e.sideHeaderBounds,n=e.sideMainBounds,a=e.sideCollapsed,c=e.actions,r=e.appActions,i=e.editing,o=Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{className:"space-left-small",onClick:function(){return c.setEditingNav({editing:!i})},children:i?"Finish":"Edit"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Collapse All"})]});return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{layout:n,borderClass:"overflow-auto",children:Object(b.jsx)("div",{children:!a&&Object(b.jsx)(nn,{appActions:r})})}),Object(b.jsxs)(p,{layout:t,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{expanded:!a,setExpanded:function(e){c.setSideCollapsed({collapsed:!e})}}),!a&&o]}),Object(b.jsx)("hr",{})]})]})}));function cn(e){return e.settingState}function rn(e){return cn(e).autoSave}function on(e){return cn(e).itemFilter}var sn=at.setItemFilter,ln=at.setSettingState,un=at.setAutoSaveEnabled,dn=n(6),hn=Object(j.b)((function(e){return{projectName:x(e),autoSaveEnabled:rn(e),sideCollapsed:ue(e),headerCollapsed:le(e),routeState:m(e),settingState:cn(e),editing:Ie(e)}}),(function(e){return{actions:Object(Kt.b)({setHeaderCollapsed:Mt,setInfo:Pt,setAutoSaveEnabled:un,setProjectName:Ft,setShowingHelp:Qt},e)}}))((function(e){var t,n=e.autoSaveEnabled,a=e.projectName,c=e.headerCollapsed,r=e.sideCollapsed,i=e.actions,o=e.routeState,s=e.settingState,l=e.editing,u=e.appActions,d=Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){return u.showIODialog()},children:"Import/Export"}),h=Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){var e=Vt();Object(dn.k)(o,s),i.setInfo({info:"Project saved to local storage. (".concat(Zt(e)," ms)")})},children:"Save"}),p=Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){i.setShowingHelp({showHelp:!0})},children:"Help"}),j=Object(b.jsxs)("span",{children:[d,h,p,Object(b.jsx)("button",{className:"vertical-center space-left-small",onClick:function(){var e=!n;i.setAutoSaveEnabled({enabled:e});var t=Object(Fe.a)(Object(Fe.a)({},s),{},{autoSave:e});Object(dn.j)(t)},children:n?"Auto Save: Enabled":"Auto Save: Disabled"}),Object(b.jsx)("button",{className:"vertical-center space-left-small",disabled:!0,children:"Force Update Resources"}),Object(b.jsx)("button",{className:"vertical-center space-left-small",disabled:!0,children:"Reset"})]}),m=Object(b.jsxs)("span",{children:[!c&&j,c&&Object(b.jsxs)(b.Fragment,{children:[d,h,p]})]});return t=l?Object(b.jsx)("input",{type:"text",value:a,onChange:function(e){i.setProjectName({projectName:e.target.value})}}):a,Object(b.jsxs)("div",{className:"overflow-hidden",children:[!r&&Object(b.jsx)("h3",{className:"overflow-hidden",children:t}),Object(b.jsx)(f,{expanded:!c,setExpanded:function(e){return i.setHeaderCollapsed({collapsed:!e})}}),!r&&m]})})),bn=Object(j.b)((function(e){return{text:ie(e)}}))((function(e){var t=e.text;return Object(b.jsx)("span",{className:"vertical-center",children:t})})),pn=n(12),jn=Object(j.b)((function(e,t){var n,a=null!==(n=Z(e,t.name))&&void 0!==n?n:"",c=Object(pn.a)(a),r=Object(o.a)(c,2);return{foreground:r[0],background:r[1]}}))((function(e){var t,n=e.name,a=e.type,c=e.value,r=e.foreground,i=e.background,s=n,l=Object(We.g)(a,c),u=Object(o.a)(l,2),d=u[0],h=u[1];return t=a.startsWith("ref")?"[".concat(h,"]"):h,Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("span",{style:{backgroundColor:i,color:r},children:["[",s,"]"]}),d,t]})})),fn=Object(j.b)((function(e,t){var n=t.actionIndex;return{deltaError:k(e,n),deltas:B(e,n)}}))((function(e){var t=e.deltas,n=e.deltaError,a=[];if(void 0===n)for(var r in t)a.push(Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(jn,Object(Fe.a)({name:r},t[r])),", "]},r));return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width align-right",children:"\u0394"}),Object(b.jsx)("td",{colSpan:6,children:void 0!==n?Object(b.jsx)("span",{className:"deltastr-error",children:n}):a})]},"delta")})),mn=Object(j.b)((function(e,t){var n=t.index;return{name:N(e,n),expanded:A(e,n),length:y(e),deltaString:C(e,n),deltaError:k(e,n),deltas:B(e,n),editing:ye(e)}}),(function(e){return{actions:Object(Kt.b)({setInfo:Pt,createAction:At,setEditingActions:_t,setActionName:Ct,setActionExpanded:kt,deleteAction:Bt,swapActions:Et,setActionDeltaString:Rt,markResourceDirtyAtSplit:Xt,setActiveAction:ot},e)}}))((function(e){var t,n=e.index,a=e.name,c=void 0===a?"":a,r=e.expanded,i=void 0!==r&&r,o=e.editing,s=e.actions,l=e.deltaString,u=void 0===l?"":l,d=e.length,h=void 0===d?0:d,p=e.appActions,j=c||"[Unnamed Action]",m=0===n,x=n===h-1,v=Object(b.jsx)("td",{className:"icon-button-width",children:u&&Object(b.jsx)(f,{expanded:i,setExpanded:function(e){s.setActionExpanded({actionIndex:n,expanded:e})}})});return t=o?Object(b.jsxs)("tr",{children:[v,Object(b.jsx)("td",{className:"icon-button-width",children:!m&&Object(b.jsx)("button",{className:"icon-button",disabled:m,title:"Move up",onClick:function(){var e=Vt();s.swapActions({i:n,j:n-1}),s.markResourceDirtyAtSplit({}),s.setInfo({info:"Action moved. (".concat(Zt(e)," ms)")})},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!x&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:x,onClick:function(){var e=Vt();s.swapActions({i:n,j:n+1}),s.markResourceDirtyAtSplit({}),s.setInfo({info:"Action moved. (".concat(Zt(e)," ms)")})},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){p.showAlert('Delete action "'.concat(c,'"? This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Vt();s.markResourceDirtyAtSplit({}),s.deleteAction({actionIndex:n}),s.setInfo({info:"Action deleted. (".concat(Zt(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Action Below",onClick:function(){if(h>=32){var e="You have reached the maximum number of actions per split (".concat(32,")");p.showAlert(e),s.setInfo({info:e})}else{var t=Vt();s.createAction({actionIndex:n+1}),s.markResourceDirtyAtSplit({}),s.setEditingActions({editing:!0}),s.setInfo({info:"Action created. (".concat(Zt(t)," ms)")})}},children:"*"})}),Object(b.jsx)("td",{className:"action-name-width",children:Object(b.jsx)("input",{className:"action-name-width",placeholder:"Action Title/Notes",type:"text",value:c,onChange:function(e){s.setActionName({actionIndex:n,name:e.target.value})}})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{className:"full-width",placeholder:"Delta String",type:"text",value:u,onChange:function(e){s.setActionDeltaString({actionIndex:n,deltaString:e.target.value}),s.markResourceDirtyAtSplit({})}})})]}):Object(b.jsxs)("tr",{children:[v,Object(b.jsx)("td",{colSpan:6,children:Object(b.jsx)("span",{children:u?Object(b.jsx)("u",{className:"split-link",onClick:function(){s.setActiveAction({activeAction:n})},children:j}):Object(b.jsx)("em",{children:j})})})]}),i&&u?Object(b.jsxs)(b.Fragment,{children:[t,Object(b.jsx)(fn,{actionIndex:n})]}):t})),xn=Object(j.b)((function(e){return{active:O(e)>=0,length:y(e)}}),(function(e){return{actions:Object(Kt.b)({createAction:At,setEditingActions:_t,setInfo:Pt,markResourceDirtyAtSplit:Xt},e)}}))((function(e){var t=e.length,n=e.active,a=e.actions,c=e.appActions;if(!n||void 0===t)return Object(b.jsx)("span",{children:"Click on a split to view its details"});for(var r=[],i=0;i<t;i++)r.push(Object(b.jsx)(mn,{index:i,appActions:c},i));return Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[r,Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:7,children:Object(b.jsx)("button",{onClick:function(){if(t>=32){var e="You have reached the maximum number of actions per split (".concat(32,")");c.showAlert(e),a.setInfo({info:e})}else{var n=Vt();a.createAction({actionIndex:t}),a.markResourceDirtyAtSplit({}),a.setEditingActions({editing:!0}),a.setInfo({info:"Action created. (".concat(Zt(n)," ms)")})}},children:"Add Action/Notes"})})},"new_action_button")]})})})),vn=Object(j.b)((function(e){return{actionMainBounds:xe(e),actionHeaderBounds:me(e),splitName:S(e),editing:ye(e)}}),(function(e){return{actions:Object(Kt.b)({setEditingActions:_t},e)}}))((function(e){var t=e.actionMainBounds,n=e.actionHeaderBounds,a=e.editing,c=e.splitName,r=e.appActions,i=e.actions,o=void 0!==c&&Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{className:"space-left-small",onClick:function(){i.setEditingActions({editing:!a})},children:a?"Finish":"Edit"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Previous Split"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Next Split"})]});return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{layout:t,borderClass:"overflow-auto",children:Object(b.jsx)("div",{children:Object(b.jsx)(xn,{appActions:r})})}),Object(b.jsx)(p,{layout:n,children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("strong",{children:[" Split Detail ",c&&" - "+c]}),o,Object(b.jsx)("hr",{})]})})]})})),On=function(e){var t=e.content,n=e.alertActions,a=e.actions;if(void 0===t)return null;var c="15rem";return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{backgroundColor:"rgba(0,0,0,0.6)",position:"absolute",top:0,left:0,width:"100vw",height:"100vh"}}),Object(b.jsx)(p,{layout:{x:Ge(Ge("100vw","-","50%"),"/","2"),y:Ge(Ge("100vh","-",c),"/","2"),w:"50%",h:c},children:Object(b.jsxs)("div",{style:{backgroundColor:"white",height:"100%",boxSizing:"border-box",padding:"1rem"},children:[t,Object(b.jsx)("div",{style:{position:"absolute",bottom:"1rem",right:"1rem"},children:n.map((function(e,t){return Object(b.jsx)("button",{className:"margin-small",onClick:function(){e.execute&&e.execute(),a.hideAlert()},children:e.name},t)}))})]})})]})},gn=Object(j.b)((function(e,t){var n=ee(e,t.index),a=Object(pn.a)(n),c=Object(o.a)(a,2),r=c[0],i=c[1];return{name:$(e,t.index),color:n,background:i,foreground:r,itemCount:te(e)}}),(function(e){return{actions:Object(Kt.b)({createItem:St,setItemName:It,setItemColor:yt,setInfo:Pt,deleteItem:Nt,swapItems:wt},e)}}))((function(e){var t=e.name,n=e.color,c=e.foreground,r=e.background,i=e.index,s=e.itemCount,l=e.actions,u=e.appActions,d=i===s-1,h=0===i,p=Object(a.useState)(""),j=Object(o.a)(p,2),f=j[0],m=j[1];return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"icon-button-width",children:!h&&Object(b.jsx)("button",{className:"icon-button",disabled:h,title:"Move up",onClick:function(){var e=Vt();l.swapItems({i:i,j:i-1}),l.setInfo({info:"Item moved. (".concat(Zt(e)," ms)")})},children:"\u2191"})}),Object(b.jsx)("td",{className:"icon-button-width",children:!d&&Object(b.jsx)("button",{className:"icon-button",title:"Move down",disabled:d,onClick:function(){var e=Vt();l.swapItems({i:i,j:i+1}),l.setInfo({info:"Item moved. (".concat(Zt(e)," ms)")})},children:"\u2193"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"Delete",onClick:function(){u.showAlert('Delete item "'.concat(t,'"? This item will also be removed from actions that currently have it. This is NOT reversible!'),[{name:"Cancel"},{name:"Delete",execute:function(){var e=Vt();l.deleteItem({index:i}),l.setInfo({info:"Item deleted. (".concat(Zt(e)," ms)")})}}])},children:"X"})}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{className:"icon-button",title:"New Item Below",onClick:function(){if(s>=Ue){var e="You have reached the maximum number of items (".concat(Ue,")");u.showAlert(e),l.setInfo({info:e})}else{var t=Vt();l.createItem({index:i+1}),l.setInfo({info:"Item created. (".concat(Zt(t)," ms)")})}},children:"*"})}),Object(b.jsxs)("td",{className:"icon-button-width",style:{backgroundColor:r,color:c},children:[i+1,"."]}),Object(b.jsx)("td",{className:"icon-button-width",children:Object(b.jsx)("button",{disabled:!f||f===t,className:"icon-button",title:"Apply rename",onClick:function(){var e=Vt();l.setItemName({index:i,name:f}),m(""),l.setInfo({info:"Item renamed. (".concat(Zt(e)," ms)")})},children:"R"})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{className:"full-width",placeholder:t||"[Unnamed]",type:"text",value:f,onChange:function(e){m(e.target.value)}})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{className:"full-width",placeholder:"Color (e.g, red, #FF0000, rgb(255, 0, 0)",type:"text",value:n,onChange:function(e){l.setItemColor({index:i,color:e.target.value})}})})]})}));function Sn(e){var t=e.value,n=e.change;return 0===n?"x".concat(t):"x".concat(t," (").concat(n>=0?"+":"").concat(n,")")}var In=Object(j.b)((function(e,t){var n=t.index,a=ee(e,n),c=Object(pn.a)(a),r=Object(o.a)(c,2),i=r[0],s=r[1];return{name:$(e,n),foreground:i,background:s}}))((function(e){var t=e.name,n=e.delta,a=e.foreground,c=e.background,r=t||"[Unnamed Item]";return Object(b.jsxs)("td",{style:{backgroundColor:c,color:a},children:[Object(b.jsx)("span",{className:"item-span",children:r}),Object(b.jsx)("span",{className:"item-span",children:n&&Sn(n)})]})})),yn=Object(j.b)((function(e){var t=on(e),n=t?t.split(",").map((function(e){return e.trim()})):[],a=function(e){var t=v(e),n=O(e),a=E(e);if(t>=0&&n>=0&&a>=0)return Q(e,t,n,a)}(e),c=void 0!==a?Be(e,a):void 0,r=function(e,t){if(0===t.length)return V(e).map((function(e,t){return t}));var n=t.map((function(e){return e.toLowerCase()})),a=[];return V(e).forEach((function(e,t){for(var c=0;c<n.length;c++)if(e.name.toLowerCase().includes(n[c])){a.push(t);break}})),a}(e,n);return Ee(e)&&c&&0!==Object.keys(c).length&&(r=r.filter((function(t){var n=$(e,t);return n in c&&0!==c[n].change}))),{itemIndices:r,editing:we(e),itemCount:te(e),getItemNameByIndex:function(t){return $(e,t)},deltas:c}}),(function(e){return{actions:Object(Kt.b)({setInfo:Pt,createItem:St},e)}}))((function(e){var t,n=e.itemIndices,a=e.deltas,c=e.getItemNameByIndex,r=e.editing,i=e.actions,o=e.appActions,s=e.itemCount;if(r)t=n.map((function(e){return Object(b.jsx)(gn,{index:e,appActions:o},e)}));else{t=[];for(var l=0;l<n.length;l+=4){var u=Object(b.jsx)("tr",{children:[l,l+1,l+2,l+3].map((function(e){if(e>=n.length)return null;var t=n[e],r=c(t),i=a?a[r]:void 0;return Object(b.jsx)(In,{index:n[e],delta:i},e)}))},l);t.push(u)}}return Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[t,Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:5,children:Object(b.jsx)("button",{onClick:function(){if(s>=Ue){var e="You have reached the maximum number of items (".concat(Ue,")");o.showAlert(e),i.setInfo({info:e})}else{var t=Vt();i.createItem({index:s}),i.setInfo({info:"Item created. (".concat(Zt(t)," ms)")})}},children:"New Item"})})},"new_item_button")]})})})),wn=Object(j.b)((function(e){return{itemMainBounds:Se(e),itemHeaderBounds:ge(e),activeActionName:R(e),resourcesCollapsed:se(e),editing:we(e),progress:Ce(e),total:K(e),error:ke(e),filterString:on(e),onlyShowChanging:Ee(e)}}),(function(e){return{actions:Object(Kt.b)({setEditingItems:Ut,setItemFilter:sn,setShowOnlyChangedResources:Gt,setResourcesCollapsed:Lt},e)}}))((function(e){var t,n=e.itemMainBounds,a=e.itemHeaderBounds,c=e.resourcesCollapsed,r=e.editing,i=e.actions,o=e.appActions,s=e.filterString,l=e.progress,u=e.total,d=e.error,h=e.onlyShowChanging,j=e.activeActionName,m=c,x=Object(b.jsx)(f,{expanded:!m,setExpanded:function(e){return i.setResourcesCollapsed({collapsed:!e})}}),v=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"space-left-small",onClick:function(){return i.setEditingItems({editing:!r})},children:r?"Finish":"Edit"}),Object(b.jsx)("input",{className:"space-left-small",type:"text",value:s,placeholder:"Filter (use , to separate)",onChange:function(e){return i.setItemFilter({filter:e.target.value})}}),Object(b.jsx)("button",{className:"space-left-small icon-button",title:"Clear",onClick:function(){return i.setItemFilter({filter:""})},children:"X"}),j&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{id:"show_only_changed_checkbox",className:"space-left-small",type:"checkbox",checked:h,onChange:function(e){i.setShowOnlyChangedResources({showOnlyChangedResources:e.target.checked})}}),Object(b.jsx)("label",{htmlFor:"show_only_changed_checkbox",children:"Show Only Changed"})]})]});return t=null===d?l===u||0===u?Object(b.jsx)("span",{children:"Resource up to date"}):Object(b.jsxs)("span",{children:["Updating Resources... (",l,"/",u,")"]}):Object(b.jsx)("span",{className:"deltastr-error",title:d.message,children:d.message}),Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{layout:n,borderClass:"overflow-auto",children:Object(b.jsx)("div",{children:!m&&Object(b.jsx)(yn,{appActions:o})})}),Object(b.jsxs)(p,{layout:a,borderClass:"overflow-hidden",children:[Object(b.jsxs)("div",{children:[x,Object(b.jsxs)("strong",{children:["Resources ",j&&" - ".concat(j)]}),!m&&v]}),!m&&Object(b.jsx)("div",{children:t}),!c&&Object(b.jsx)("hr",{})]})]})})),Nn=void 0;function An(){void 0!==Nn&&clearInterval(Nn)}function Cn(){if(ct.getState()){var e=ct.getState(),t=Ce(e),n=K(e);0!==n&&t<n&&function(e,t){t<0&&(t=0);var n=ke(e);if(null!==n){if(t>Q(e,n.branch,n.split,n.action))return void ct.dispatch(qt({globalIndex:t,content:{}}))}var a={};if(t>0){var c=Be(e,t-1);if(void 0===c)return void ct.dispatch(zt({globalIndex:t-1}));a=c}var r=function(e,t){for(var n=t,a=0;a<T(e);a++)for(var c=0;c<_(e,a);c++){var r=J(e,a,c);if(n<r)return[a,c,n];n-=r}return[-1,-1,-1]}(e,t),i=Object(o.a)(r,3),s=i[0],l=i[1],u=i[2],d=G(e,s,l,u);if(null!==function(e,t,n,a){return q(e,t,n,a).deltaError}(e,s,l,u)||null===d){var h=M(e,s),b=U(e,s,l),p=X(e,s,l,u),j={branch:s,split:l,action:u,message:'Error in branch "'.concat(h,'", split "').concat(b,'", action "').concat(p,'"')};return ct.dispatch(Jt({error:j})),void ct.dispatch(qt({globalIndex:t,content:{}}))}var f=function(e,t){var n,a,c=function(t){return t in e?e[t].value:0},r={};for(var i in e)r[i]={value:e[i].value,change:0};for(var o in t){var s=t[o],l=s.type,u=s.value,d=c(o),h=void 0,b=void 0;switch(l){case"add":h=d+(b=null!==(n=Number(u))&&void 0!==n?n:0);break;case"set":b=(h=null!==(a=Number(u))&&void 0!==a?a:0)-d;break;case"ref_add":h=d+(b=c(u.toString()));break;case"ref_sub":h=d+(b=-c(u.toString()));break;case"ref_set":b=(h=c(u.toString()))-d}r[o]={value:h,change:b}}return r}(a,d);ct.dispatch(qt({globalIndex:t,content:f}))}(e,t)}}var kn=void 0;function Bn(){void 0!==kn&&clearInterval(kn)}function En(){if(ct.getState()){var e=ct.getState();e.settingState.autoSave&&(Object(dn.k)(e.routeState,e.settingState),ct.dispatch(Pt({info:"Last saved to local storage: ".concat(new Date)})))}}var Rn=Object(j.b)((function(e){return{routeState:m(e),downloadName:x(e)||"Routing"}}),(function(e){return{actions:Object(Kt.b)({setRouteState:rt,setInfo:Pt,markResourceDirtyAt:zt},e)}}))((function(e){var t=e.routeState,n=e.downloadName,c=e.appActions,r=e.actions,i=Object(a.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],d=function(e,t){Object(dn.i)(e,(function(e){var n=t(e),a=Object(o.a)(n,2),i=a[0],s=a[1];if(null!==s||null===i)return c.showIODialog(!1),void c.showAlert("Error on import: ".concat(s));r.setRouteState({routeState:i}),r.markResourceDirtyAt({globalIndex:0}),c.showIODialog(!1),r.setInfo({info:"Imported."})}))};return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Export"})}),Object(b.jsx)("hr",{}),"Export As:",Object(b.jsx)("button",{className:"space-left-small",onClick:function(){var e=Object(dn.c)(t);Object(dn.b)(n,e,"txt")},children:"Base64 (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Compressed (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",onClick:function(){var e=Object(dn.d)(t);Object(dn.b)(n,e,"json")},children:"JSON (.json) [Recommended]"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Text (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"LiveSplit (.lss)"}),Object(b.jsx)("hr",{}),Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Import"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("input",{className:"vertical-center space-left-small",type:"file",onChange:function(e){u(e.target.files)}}),Object(b.jsx)("br",{}),"Import As:",Object(b.jsx)("button",{className:"space-left-small",disabled:null===l,onClick:function(){null!==l&&d(l[0],dn.e)},children:"Base64 (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:!0,children:"Compressed (.txt)"}),Object(b.jsx)("button",{className:"space-left-small",disabled:null===l,onClick:function(){null!==l&&d(l[0],dn.f)},children:"JSON (.json)"})]})})})),Fn=function(){return Object(b.jsx)(p,{layout:{x:"0",y:"0",w:"100%",h:"100%"},borderClass:"overflow-auto",children:Object(b.jsxs)("div",{className:"help-doc",children:[Object(b.jsx)("h1",{children:"Resource Routing Tool"}),Object(b.jsx)("p",{children:"This tool is very useful for tracking various resources needed in a speedrun."}),Object(b.jsxs)("p",{children:["You might say: ",Object(b.jsx)("em",{children:' "Why don\'t I just use a spreadsheet?" '}),"This tool has some unique features that makes it better than a normal spreadsheet:",Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:["The robust algorithm keeps the route ",Object(b.jsx)("strong",{children:"consistent"})," while ",Object(b.jsx)("strong",{children:"moving splits and branches around."})]}),Object(b.jsxs)("li",{children:["Easy-to-use syntax to define and organize your items. ",Object(b.jsx)("strong",{children:"No complex formulas"})]}),Object(b.jsxs)("li",{children:["Export your route as TXT, JSON, or to ",Object(b.jsx)("strong",{children:"LiveSplit"})," [WIP]"]})]})]}),Object(b.jsx)("h2",{children:"Getting Started"}),Object(b.jsxs)("p",{children:["The data structure of the tool is very intuitive: there are ",Object(b.jsx)("strong",{children:"branches"}),", ",Object(b.jsx)("strong",{children:"splits"}),", and ",Object(b.jsx)("strong",{children:"actions"}),"."]}),Object(b.jsx)("p",{children:"If you are into speedrun. You already know what a split is. Branches are basically groups of splits. Actions are what you do in the split that affects the resources you track."}),Object(b.jsxs)("p",{children:["For example, a typical section of the run could be like this:",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Tutorial Levels"}),Object(b.jsxs)("li",{children:["Main Area",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Dungeon A"}),Object(b.jsxs)("li",{children:["Dungeon B",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Pick up 5 of Item 1"}),Object(b.jsx)("li",{children:"Fight Monster X"})]})]}),Object(b.jsxs)("li",{children:["Dungeon C",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Use 3 of Item 2"}),Object(b.jsx)("li",{children:"Fight Monster Y"})]})]})]})]}),Object(b.jsx)("li",{children:"Final Boss"})]})]}),Object(b.jsx)("h2",{children:"Branch and Splits"}),Object(b.jsx)("p",{children:'You can use the side panel to organize your branches and splits. Use the "Edit" button to enter editing mode, where you can move branches and splits, rename them, or delete them. When you click on a split, you will enter that split and can then edit the actions in the splits.'}),Object(b.jsx)("h2",{children:"Items and Delta String"}),Object(b.jsx)("p",{children:"During the run, each action may affect the current resources the player possesses. This tool is organized in the same way."}),Object(b.jsxs)("p",{children:["Each action in a split has a ",Object(b.jsx)("strong",{children:"delta string"})," that is used to define the resources changes as a result of that action."]}),Object(b.jsxs)("p",{children:["To define a delta string, you first must define the items. Follow the steps below to define an item:",Object(b.jsxs)("ol",{children:[Object(b.jsx)("li",{children:'Click on "New Item" under the "Resources" section'}),Object(b.jsx)("li",{children:'Click on "Edit" next to "Resources"'}),Object(b.jsx)("li",{children:'Enter the item name and press the "R" button next to the text box to rename the item'}),Object(b.jsx)("li",{children:'Click on "Finish" to exit the editing mode'})]}),"Now that you have defined your first item. It's time to write some delta strings."]}),Object(b.jsx)("h2",{children:"Delta String Syntax"}),Object(b.jsxs)("p",{children:["The basic syntax for the delta string is ",Object(b.jsx)("code",{children:"[(item)](operator)(quantity)"})]}),Object(b.jsxs)("ol",{children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("code",{children:"item"}),": The name of the item"]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("code",{children:"operator"}),": One of ",Object(b.jsx)("code",{children:"+"}),", ",Object(b.jsx)("code",{children:"-"}),", ",Object(b.jsx)("code",{children:"="})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("code",{children:"quantity"}),": How much to change"]})]}),Object(b.jsxs)("p",{children:["For example, ",Object(b.jsx)("code",{children:"[Apple]+5"})," means adding 5 apples to the resources during this action. (Given that ",Object(b.jsx)("code",{children:"Apple"})," is defined in the Resources section)"]}),Object(b.jsxs)("p",{children:["Similarly, ",Object(b.jsx)("code",{children:"[Orange]-3"})," means subtracting 3 oranges, and ",Object(b.jsx)("code",{children:"[Banana]=5"})," means setting the quantity of bananas to 5"]}),Object(b.jsx)("p",{children:"You can also use reference to the quantity of another item."}),Object(b.jsxs)("p",{children:["For example, ",Object(b.jsx)("code",{children:"[Rock]+[Wood]"})," means adding as many woods to rocks. If you have 5 woods and 8 rocks, you will now have 5 woods and 13 rocks."]}),Object(b.jsxs)("p",{children:["The reference is done in parallel. So, ",Object(b.jsx)("code",{children:"[Rock]=[Wood], [Wood]=[Rock]"})," will swap the quantities of woods and rocks."]}),Object(b.jsxs)("p",{children:["(Oh yeah, if you haven't already realize, use ",Object(b.jsx)("code",{children:","})," to separate multiple items like the example above)"]}),Object(b.jsx)("h2",{children:"Track Resources"}),Object(b.jsx)("p",{children:"You can use the Resources section to see all the resources defined. Use the filter text box to filter them. Multiple search word can be separated with comma (,). The search will give any item that contains any of the search words."}),Object(b.jsxs)("p",{children:["When you click on an action. ",Object(b.jsx)("strong",{children:"You are focused to that action. "})," The Resources section will now also show how the items changed in during that action, as well as the quantity ",Object(b.jsx)("strong",{children:"after"})," the action is done."]}),Object(b.jsx)("p",{children:"When your route gets longer. You may notice that the resource tracker takes time to finish calculating all the resources. When it's calculating, you can continue editing the route. However, the tracking result may not be accurate when it's not done calculating. Especially if it is something you just edited."}),Object(b.jsx)("h2",{children:"FAQ"}),Object(b.jsx)("p",{children:"I will put whatever questions people ask me here."}),Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Q: Why are some buttons disabled?"})}),Object(b.jsx)("p",{children:"A: I didn't finish implementing them"}),Object(b.jsx)("h2",{children:"Other"}),Object(b.jsxs)("p",{children:["Source on ",Object(b.jsx)("a",{href:"https://github.com/resource-routing/resource-routing.github.io",children:"Github"})]})]})})},Dn=function(e){return{headerBounds:he(e),sideBounds:be(e),actionsBounds:fe(e),footerBounds:ve(e),resourcesBounds:Oe(e),showHelp:Re(e)}},Tn=function(e){return{actions:Object(Kt.b)({setWindowWidth:Dt,doLayout:Tt,setRouteState:rt,setInfo:Pt,setSettingState:ln,markResourceDirtyAt:zt},e)}},Mn=(Object(j.b)(Dn,Tn),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={alertContent:void 0,alertActions:[],showIOAlert:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.redoLayout.bind(this)),this.props.actions.doLayout();var e=Object(dn.h)(),t=Object(o.a)(e,2),n=t[0],a=t[1];n?(this.props.actions.setRouteState({routeState:n}),this.props.actions.markResourceDirtyAt({globalIndex:0}),this.props.actions.setInfo({info:"Loaded from local storage"})):this.props.actions.setInfo({info:"Failed to load from local storage. Loaded empty project."}),a&&this.props.actions.setSettingState({settingState:a}),An(),Nn=setInterval(Cn,100),Bn(),kn=setInterval(En,2e4)}},{key:"redoLayout",value:function(){this.props.actions.setWindowWidth({width:window.innerWidth})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.redoLayout.bind(this)),An(),Bn()}},{key:"showAlert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{name:"OK"}];this.setState({alertContent:e,alertActions:t})}},{key:"render",value:function(){var e=this,t={showAlert:this.showAlert.bind(this),showIODialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.setState({showIOAlert:t})}},n=this.props,a=n.headerBounds,c=n.sideBounds,r=n.actionsBounds,i=n.footerBounds,o=n.resourcesBounds,s=n.showHelp;return Object(b.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[Object(b.jsx)(p,{layout:a,borderClass:"border overflow-hidden",children:Object(b.jsx)(hn,{appActions:t})}),Object(b.jsx)(p,{layout:c,borderClass:"border",children:Object(b.jsx)(an,{appActions:t})}),Object(b.jsx)(p,{layout:i,borderClass:"border",children:Object(b.jsx)(bn,{})}),Object(b.jsx)(p,{layout:r,borderClass:"border overflow",children:s?Object(b.jsx)(Fn,{}):Object(b.jsx)(vn,{appActions:t})}),Object(b.jsx)(p,{layout:o,borderClass:"border",children:Object(b.jsx)(wn,{appActions:t})}),Object(b.jsx)(On,{content:this.state.alertContent,alertActions:this.state.alertActions,actions:{hideAlert:function(){return e.showAlert()}}}),Object(b.jsx)(On,{content:this.state.showIOAlert?Object(b.jsx)(Rn,{appActions:t}):void 0,alertActions:[{name:"Close"}],actions:{hideAlert:function(){return e.setState({showIOAlert:!1})}}})]})}}]),n}(c.a.Component)),Wn=Object(j.b)(Dn,Tn)(Mn);i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(j.a,{store:ct,children:Object(b.jsx)(Wn,{})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.cc9de506.chunk.js.map